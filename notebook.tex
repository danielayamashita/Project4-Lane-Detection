
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{Project4}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \hypertarget{self-driving-car-engineer-nanodegree}{%
\section{Self-Driving Car Engineer
Nanodegree}\label{self-driving-car-engineer-nanodegree}}

\hypertarget{project-advanced-techniques-for-lane-finding}{%
\subsection{Project: Advanced Techniques for Lane
Finding}\label{project-advanced-techniques-for-lane-finding}}

    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{step-0-import-libraries}{%
\subsection{Step 0: Import Libraries}\label{step-0-import-libraries}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}1}]:} \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
        \PY{k+kn}{import} \PY{n+nn}{cv2}
        \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
        \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{image} \PY{k}{as} \PY{n+nn}{mpimg}
        \PY{k+kn}{import} \PY{n+nn}{glob}
\end{Verbatim}


    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{step-1-user-variables}{%
\subsection{Step 1: User Variables}\label{step-1-user-variables}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}2}]:} \PY{n}{ENABLE\PYZus{}CAMERA\PYZus{}CALIBRATION} \PY{o}{=} \PY{k+kc}{True} \PY{c+c1}{\PYZsh{}enable the camera calibration process}
\end{Verbatim}


    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{step-2-functions-definition}{%
\subsection{Step 2: Functions
definition}\label{step-2-functions-definition}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}3}]:} \PY{k}{def} \PY{n+nf}{CameraObjectsAndPoints}\PY{p}{(}\PY{n}{images}\PY{p}{,}\PY{n}{nx}\PY{p}{,}\PY{n}{ny}\PY{p}{)}\PY{p}{:}
            \PY{c+c1}{\PYZsh{} Prepare object points}
            \PY{n}{objp} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{p}{(}\PY{n}{nx}\PY{o}{*}\PY{n}{ny}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}\PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{float32}\PY{p}{)}
            \PY{n}{objp}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{l+m+mi}{2}\PY{p}{]} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{mgrid}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{:}\PY{n}{nx}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{:}\PY{n}{ny}\PY{p}{]}\PY{o}{.}\PY{n}{T}\PY{o}{.}\PY{n}{reshape}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)} \PY{c+c1}{\PYZsh{}x, y coordinates}
        
            \PY{k}{for} \PY{n}{fname} \PY{o+ow}{in} \PY{n}{images}\PY{p}{:}
                \PY{n+nb}{print}\PY{p}{(}\PY{n}{fname}\PY{p}{)}
                \PY{c+c1}{\PYZsh{}Read each image}
                \PY{n}{img} \PY{o}{=}\PY{n}{mpimg}\PY{o}{.}\PY{n}{imread}\PY{p}{(}\PY{n}{fname}\PY{p}{)}
        
                \PY{c+c1}{\PYZsh{}Convert image to grayscale}
                \PY{n}{gray} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{cvtColor}\PY{p}{(}\PY{n}{img}\PY{p}{,}\PY{n}{cv2}\PY{o}{.}\PY{n}{COLOR\PYZus{}BGR2GRAY}\PY{p}{)}
        
                \PY{c+c1}{\PYZsh{}Find the chessboard corners}
                \PY{n}{ret}\PY{p}{,} \PY{n}{corners} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{findChessboardCorners}\PY{p}{(}\PY{n}{gray}\PY{p}{,} \PY{p}{(}\PY{n}{nx}\PY{p}{,}\PY{n}{ny}\PY{p}{)}\PY{p}{,}\PY{k+kc}{None}\PY{p}{)}
                \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Ret=}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{ret}\PY{p}{)}
                \PY{k}{if} \PY{n}{ret} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
                    \PY{n}{imgpoints}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{corners}\PY{p}{)}
                    \PY{n}{objpoints}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{objp}\PY{p}{)}
                    \PY{c+c1}{\PYZsh{}draw and display the corners}
                    \PY{n}{img} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{drawChessboardCorners}\PY{p}{(}\PY{n}{img}\PY{p}{,}\PY{p}{(}\PY{n}{nx}\PY{p}{,}\PY{n}{ny}\PY{p}{)}\PY{p}{,}\PY{n}{corners}\PY{p}{,}\PY{n}{ret}\PY{p}{)}
                    \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
                    \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{img}\PY{p}{)}
        
            \PY{k}{return} \PY{n}{objpoints}\PY{p}{,}\PY{n}{imgpoints}
        
        
        \PY{k}{def} \PY{n+nf}{cal\PYZus{}undistort}\PY{p}{(}\PY{n}{img}\PY{p}{,} \PY{n}{objpoints}\PY{p}{,} \PY{n}{imgpoints}\PY{p}{)}\PY{p}{:}
            \PY{c+c1}{\PYZsh{} Use cv2.calibrateCamera() and cv2.undistort()}
            \PY{c+c1}{\PYZsh{}undist = np.copy(img)  \PYZsh{} Delete this line}
            \PY{n}{gray} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{cvtColor}\PY{p}{(}\PY{n}{img}\PY{p}{,}\PY{n}{cv2}\PY{o}{.}\PY{n}{COLOR\PYZus{}BGR2GRAY}\PY{p}{)}
            \PY{n}{ret}\PY{p}{,} \PY{n}{mtx}\PY{p}{,} \PY{n}{dist}\PY{p}{,} \PY{n}{rvecs}\PY{p}{,} \PY{n}{tvecs} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{calibrateCamera}\PY{p}{(}\PY{n}{objpoints}\PY{p}{,} \PY{n}{imgpoints}\PY{p}{,} \PY{n}{gray}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{p}{:}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{k+kc}{None}\PY{p}{,} \PY{k+kc}{None}\PY{p}{)}
            \PY{n}{undist} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{undistort}\PY{p}{(}\PY{n}{img}\PY{p}{,} \PY{n}{mtx}\PY{p}{,} \PY{n}{dist}\PY{p}{,} \PY{k+kc}{None}\PY{p}{,} \PY{n}{mtx}\PY{p}{)}
            \PY{k}{return} \PY{n}{undist}
        
        \PY{k}{def} \PY{n+nf}{CreateBinaryImage}\PY{p}{(}\PY{n}{img}\PY{p}{,}\PY{n}{thresh\PYZus{}min}\PY{p}{,}\PY{n}{thresh\PYZus{}max}\PY{p}{,}\PY{n}{s\PYZus{}thresh\PYZus{}min}\PY{p}{,}\PY{n}{s\PYZus{}thresh\PYZus{}max}\PY{p}{)}\PY{p}{:}
        
            \PY{c+c1}{\PYZsh{} Convert to HLS color space and separate the S channel}
            \PY{n}{hls} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{cvtColor}\PY{p}{(}\PY{n}{img}\PY{p}{,} \PY{n}{cv2}\PY{o}{.}\PY{n}{COLOR\PYZus{}RGB2HLS}\PY{p}{)}
            \PY{n}{s\PYZus{}channel} \PY{o}{=} \PY{n}{hls}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{]}
            \PY{n}{l\PYZus{}channel} \PY{o}{=} \PY{n}{hls}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{]}
            
            \PY{c+c1}{\PYZsh{} Grayscale image}
            \PY{n}{gray} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{cvtColor}\PY{p}{(}\PY{n}{img}\PY{p}{,} \PY{n}{cv2}\PY{o}{.}\PY{n}{COLOR\PYZus{}RGB2GRAY}\PY{p}{)}
        
            \PY{c+c1}{\PYZsh{} Sobel x}
            \PY{n}{sobelx} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{Sobel}\PY{p}{(}\PY{n}{gray}\PY{p}{,} \PY{n}{cv2}\PY{o}{.}\PY{n}{CV\PYZus{}64F}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)} \PY{c+c1}{\PYZsh{} Take the derivative in x}
            \PY{n}{abs\PYZus{}sobelx} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{absolute}\PY{p}{(}\PY{n}{sobelx}\PY{p}{)} \PY{c+c1}{\PYZsh{} Absolute x derivative to accentuate lines away from horizontal}
            \PY{n}{scaled\PYZus{}sobel} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{uint8}\PY{p}{(}\PY{l+m+mi}{255}\PY{o}{*}\PY{n}{abs\PYZus{}sobelx}\PY{o}{/}\PY{n}{np}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{n}{abs\PYZus{}sobelx}\PY{p}{)}\PY{p}{)}
        
            \PY{c+c1}{\PYZsh{} Threshold x gradient}
            \PY{n}{sxbinary} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{scaled\PYZus{}sobel}\PY{p}{)}
            \PY{n}{sxbinary}\PY{p}{[}\PY{p}{(}\PY{n}{scaled\PYZus{}sobel} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{thresh\PYZus{}min}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{scaled\PYZus{}sobel} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{thresh\PYZus{}max}\PY{p}{)}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
            
            \PY{c+c1}{\PYZsh{} Threshold color channel s}
            \PY{n}{s\PYZus{}binary} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{s\PYZus{}channel}\PY{p}{)}
            \PY{n}{s\PYZus{}binary}\PY{p}{[}\PY{p}{(}\PY{n}{s\PYZus{}channel} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{s\PYZus{}thresh\PYZus{}min}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{s\PYZus{}channel} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{s\PYZus{}thresh\PYZus{}max}\PY{p}{)}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
            
            \PY{c+c1}{\PYZsh{} Threshold color channel l}
            \PY{n}{l\PYZus{}binary} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{l\PYZus{}channel}\PY{p}{)}
            \PY{n}{l\PYZus{}binary}\PY{p}{[}\PY{p}{(}\PY{n}{l\PYZus{}channel} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{l\PYZus{}thresh\PYZus{}min}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{l\PYZus{}channel} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{l\PYZus{}thresh\PYZus{}max}\PY{p}{)}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
        
            \PY{c+c1}{\PYZsh{} Stack each channel to view their individual contributions in green and blue respectively}
            \PY{c+c1}{\PYZsh{} This returns a stack of the two binary images, whose components you can see as different colors}
            \PY{n}{color\PYZus{}binary} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{dstack}\PY{p}{(}\PY{p}{(} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{sxbinary}\PY{p}{)}\PY{p}{,} \PY{n}{sxbinary}\PY{p}{,} \PY{n}{s\PYZus{}binary}\PY{p}{)}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{255}
        
            \PY{c+c1}{\PYZsh{} Combine the two binary thresholds}
            \PY{n}{combined\PYZus{}binary} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{sxbinary}\PY{p}{)}
            \PY{n}{combined\PYZus{}binary}\PY{p}{[}\PY{p}{(}\PY{p}{(}\PY{n}{s\PYZus{}binary} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{)}\PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{l\PYZus{}binary} \PY{o}{==}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)} \PY{o}{|} \PY{p}{(}\PY{n}{sxbinary} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
        
            \PY{k}{return} \PY{n}{color\PYZus{}binary}\PY{p}{,}\PY{n}{combined\PYZus{}binary}
        
        \PY{k}{def} \PY{n+nf}{warp}\PY{p}{(}\PY{n}{img}\PY{p}{,}\PY{n}{scr}\PY{p}{,}\PY{n}{dest}\PY{p}{)}\PY{p}{:}
            \PY{c+c1}{\PYZsh{}Image size}
            \PY{n}{img\PYZus{}size} \PY{o}{=} \PY{p}{(}\PY{n}{img}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{img}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
            
            \PY{c+c1}{\PYZsh{}Perspective transformation}
            \PY{n}{M} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{getPerspectiveTransform}\PY{p}{(}\PY{n}{src}\PY{p}{,} \PY{n}{dst}\PY{p}{)}
            
            \PY{c+c1}{\PYZsh{}Warp the image}
            \PY{n}{warped} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{warpPerspective}\PY{p}{(}\PY{n}{img}\PY{p}{,} \PY{n}{M}\PY{p}{,} \PY{n}{img\PYZus{}size}\PY{p}{,} \PY{n}{flags}\PY{o}{=}\PY{n}{cv2}\PY{o}{.}\PY{n}{INTER\PYZus{}LINEAR}\PY{p}{)}
            
            \PY{k}{return} \PY{n}{warped}
        
        \PY{k}{def} \PY{n+nf}{unwarp}\PY{p}{(}\PY{n}{img}\PY{p}{,}\PY{n}{scr}\PY{p}{,}\PY{n}{dest}\PY{p}{)}\PY{p}{:}
            \PY{c+c1}{\PYZsh{}Image size}
            \PY{n}{img\PYZus{}size} \PY{o}{=} \PY{p}{(}\PY{n}{img}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{img}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
            
            \PY{c+c1}{\PYZsh{}Perspective anti\PYZhy{}transformation}
            \PY{n}{Minv} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{getPerspectiveTransform}\PY{p}{(}\PY{n}{dst}\PY{p}{,} \PY{n}{src}\PY{p}{)}
            
            \PY{c+c1}{\PYZsh{}Warp the image}
            \PY{n}{unwarped} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{warpPerspective}\PY{p}{(}\PY{n}{img}\PY{p}{,} \PY{n}{Minv}\PY{p}{,} \PY{n}{img\PYZus{}size}\PY{p}{,} \PY{n}{flags}\PY{o}{=}\PY{n}{cv2}\PY{o}{.}\PY{n}{INTER\PYZus{}LINEAR}\PY{p}{)}
            
            \PY{k}{return} \PY{n}{unwarped}
        
        \PY{k}{def} \PY{n+nf}{fillRoad}\PY{p}{(}\PY{n}{img}\PY{p}{,}\PY{n}{left\PYZus{}fitx}\PY{p}{,}\PY{n}{right\PYZus{}fitx}\PY{p}{,}\PY{n}{ploty}\PY{p}{)}\PY{p}{:}
            \PY{n}{window\PYZus{}img} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{img}\PY{p}{)}
            \PY{n}{left\PYZus{}line}\PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{transpose}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{[}\PY{n}{left\PYZus{}fitx}\PY{p}{,}\PY{n}{ploty}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{]}\PY{p}{)}
            \PY{n}{right\PYZus{}line}\PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{flipud}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{transpose}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{[}\PY{n}{right\PYZus{}fitx}\PY{p}{,}\PY{n}{ploty}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{]}\PY{p}{)}
            \PY{n}{line\PYZus{}pts} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{hstack}\PY{p}{(}\PY{p}{(}\PY{n}{left\PYZus{}line}\PY{p}{,} \PY{n}{right\PYZus{}line}\PY{p}{)}\PY{p}{)}
            \PY{n}{cv2}\PY{o}{.}\PY{n}{fillPoly}\PY{p}{(}\PY{n}{window\PYZus{}img}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{int\PYZus{}}\PY{p}{(}\PY{p}{[}\PY{n}{line\PYZus{}pts}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{255}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}\PY{p}{)}
            \PY{n}{filled\PYZus{}img} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{addWeighted}\PY{p}{(}\PY{n}{img}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{n}{window\PYZus{}img}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}
            \PY{k}{return} \PY{n}{filled\PYZus{}img}\PY{p}{,}\PY{n}{window\PYZus{}img}
\end{Verbatim}


    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{step-3-camera-calibration}{%
\subsection{Step 3: Camera
calibration}\label{step-3-camera-calibration}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}4}]:} \PY{k}{if} \PY{n}{ENABLE\PYZus{}CAMERA\PYZus{}CALIBRATION} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
            \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ENABLE\PYZus{}CAMERA\PYZus{}CALIBRATION is enabled}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
            \PY{c+c1}{\PYZsh{}Read in a calibration image}
            \PY{n}{original\PYZus{}images} \PY{o}{=} \PY{n}{glob}\PY{o}{.}\PY{n}{glob}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{./CarND\PYZhy{}Advanced\PYZhy{}Lane\PYZhy{}Lines\PYZhy{}master/camera\PYZus{}cal/calibration*.jpg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
            \PY{c+c1}{\PYZsh{}Number of row and coluns in the chess board}
            \PY{n}{nx} \PY{o}{=} \PY{l+m+mi}{9}
            \PY{n}{ny} \PY{o}{=} \PY{l+m+mi}{6}
        
            \PY{c+c1}{\PYZsh{}Shape of the image}
            \PY{n}{img\PYZus{}sample} \PY{o}{=} \PY{n}{mpimg}\PY{o}{.}\PY{n}{imread}\PY{p}{(}\PY{n}{original\PYZus{}images}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
            \PY{n}{shapeImg} \PY{o}{=} \PY{n}{img\PYZus{}sample}\PY{o}{.}\PY{n}{shape}
        
            \PY{c+c1}{\PYZsh{}Calibrate the camera}
            \PY{n}{objpoints} \PY{o}{=} \PY{p}{[}\PY{p}{]} \PY{c+c1}{\PYZsh{}3D points in real world space}
            \PY{n}{imgpoints} \PY{o}{=} \PY{p}{[}\PY{p}{]} \PY{c+c1}{\PYZsh{}2D points in image plane}
            \PY{n}{objpoints}\PY{p}{,}\PY{n}{imgpoints} \PY{o}{=} \PY{n}{CameraObjectsAndPoints}\PY{p}{(}\PY{n}{original\PYZus{}images}\PY{p}{,}\PY{n}{nx}\PY{p}{,}\PY{n}{ny}\PY{p}{)}
             \PY{c+c1}{\PYZsh{}undistorT a test image}
            \PY{n}{undistorted} \PY{o}{=} \PY{n}{cal\PYZus{}undistort}\PY{p}{(}\PY{n}{img\PYZus{}sample}\PY{p}{,}\PY{n}{objpoints}\PY{p}{,}\PY{n}{imgpoints}\PY{p}{)}
            \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
            \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{undistorted}\PY{p}{)}
        
            \PY{c+c1}{\PYZsh{}Show the image}
            \PY{n}{f}\PY{p}{,} \PY{p}{(}\PY{n}{ax1}\PY{p}{,} \PY{n}{ax2}\PY{p}{)} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{24}\PY{p}{,} \PY{l+m+mi}{9}\PY{p}{)}\PY{p}{)}
            \PY{n}{f}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
            \PY{n}{ax1}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{img\PYZus{}sample}\PY{p}{)}
            \PY{n}{ax1}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Original Image}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{)}
            \PY{n}{ax2}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{undistorted}\PY{p}{)}
            \PY{n}{ax2}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Undistorted Image}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{)}
            \PY{n}{plt}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{left}\PY{o}{=}\PY{l+m+mf}{0.}\PY{p}{,} \PY{n}{right}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{top}\PY{o}{=}\PY{l+m+mf}{0.9}\PY{p}{,} \PY{n}{bottom}\PY{o}{=}\PY{l+m+mf}{0.}\PY{p}{)}
        \PY{k}{else}\PY{p}{:} 
            \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ENABLE\PYZus{}CAMERA\PYZus{}CALIBRATION is disabled}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
            
        
           
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
ENABLE\_CAMERA\_CALIBRATION is enabled
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration1.jpg
Ret= False
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration10.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration11.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration12.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration13.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration14.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration15.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration16.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration17.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration18.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration19.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration2.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration20.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration3.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration4.jpg
Ret= False
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration5.jpg
Ret= False
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration6.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration7.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration8.jpg
Ret= True
./CarND-Advanced-Lane-Lines-master/camera\_cal\textbackslash{}calibration9.jpg
Ret= True

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_4.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_5.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_6.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_7.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_8.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_9.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_10.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_11.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_12.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_13.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_14.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_15.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_16.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_17.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_18.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_19.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{test-the-udistortion-in-other-images}{%
\subsubsection{Test the udistortion in other
images}\label{test-the-udistortion-in-other-images}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}5}]:} \PY{c+c1}{\PYZsh{}Shape of the image}
        \PY{n}{img\PYZus{}sample} \PY{o}{=} \PY{n}{mpimg}\PY{o}{.}\PY{n}{imread}\PY{p}{(}\PY{n}{original\PYZus{}images}\PY{p}{[}\PY{l+m+mi}{14}\PY{p}{]}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{}Undistort a test image}
        \PY{n}{undistorted} \PY{o}{=} \PY{n}{cal\PYZus{}undistort}\PY{p}{(}\PY{n}{img\PYZus{}sample}\PY{p}{,}\PY{n}{objpoints}\PY{p}{,}\PY{n}{imgpoints}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{undistorted}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{}Show the image}
        \PY{n}{f}\PY{p}{,} \PY{p}{(}\PY{n}{ax1}\PY{p}{,} \PY{n}{ax2}\PY{p}{)} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{24}\PY{p}{,} \PY{l+m+mi}{9}\PY{p}{)}\PY{p}{)}
        \PY{n}{f}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{img\PYZus{}sample}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Original Image}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{)}
        \PY{n}{ax2}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{undistorted}\PY{p}{)}
        \PY{n}{ax2}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Undistorted Image}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{left}\PY{o}{=}\PY{l+m+mf}{0.}\PY{p}{,} \PY{n}{right}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{top}\PY{o}{=}\PY{l+m+mf}{0.9}\PY{p}{,} \PY{n}{bottom}\PY{o}{=}\PY{l+m+mf}{0.}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_10_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_10_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{step-4-creating-binary-images}{%
\subsection{Step 4: Creating binary
images}\label{step-4-creating-binary-images}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{c+c1}{\PYZsh{}Read the image tests}
        \PY{n}{testPath} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.//CarND\PYZhy{}Advanced\PYZhy{}Lane\PYZhy{}Lines\PYZhy{}master/test\PYZus{}images/test5.jpg}\PY{l+s+s1}{\PYZsq{}}
        \PY{n}{img} \PY{o}{=} \PY{n}{mpimg}\PY{o}{.}\PY{n}{imread}\PY{p}{(}\PY{n}{testPath}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{}Undistort the image}
        \PY{n}{undist} \PY{o}{=} \PY{n}{cal\PYZus{}undistort}\PY{p}{(}\PY{n}{img}\PY{p}{,}\PY{n}{objpoints}\PY{p}{,}\PY{n}{imgpoints}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{}Define thresholds max and min for binary image construction}
        \PY{n}{l\PYZus{}thresh\PYZus{}min} \PY{o}{=} \PY{l+m+mi}{90}
        \PY{n}{l\PYZus{}thresh\PYZus{}max} \PY{o}{=} \PY{l+m+mi}{255}
        \PY{n}{thresh\PYZus{}min} \PY{o}{=} \PY{l+m+mi}{45}
        \PY{n}{thresh\PYZus{}max} \PY{o}{=} \PY{l+m+mi}{100}
        \PY{n}{s\PYZus{}thresh\PYZus{}min} \PY{o}{=} \PY{l+m+mi}{170}
        \PY{n}{s\PYZus{}thresh\PYZus{}max} \PY{o}{=} \PY{l+m+mi}{255}
        \PY{c+c1}{\PYZsh{}Creating binary image}
        \PY{n}{color\PYZus{}binary}\PY{p}{,}\PY{n}{combined\PYZus{}binary} \PY{o}{=}\PY{n}{CreateBinaryImage}\PY{p}{(}\PY{n}{img}\PY{p}{,}\PY{n}{thresh\PYZus{}min}\PY{p}{,}\PY{n}{thresh\PYZus{}max}\PY{p}{,}\PY{n}{s\PYZus{}thresh\PYZus{}min}\PY{p}{,}\PY{n}{s\PYZus{}thresh\PYZus{}max}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{} Plotting thresholded images}
        \PY{n}{f}\PY{p}{,} \PY{p}{(}\PY{n}{ax1}\PY{p}{,} \PY{n}{ax2}\PY{p}{,}\PY{n}{ax3}\PY{p}{)} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{3}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Original image}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{img}\PY{p}{)}
        
        \PY{n}{ax2}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Stacked thresholds}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax2}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{color\PYZus{}binary}\PY{p}{)}
        
        \PY{n}{ax3}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Combined S channel and gradient thresholds}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax3}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{combined\PYZus{}binary}\PY{p}{,} \PY{n}{cmap}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gray}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}6}]:} <matplotlib.image.AxesImage at 0x5868860>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_12_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{step-5-perspective-transforming}{%
\subsection{Step 5: Perspective
transforming}\label{step-5-perspective-transforming}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} \PY{c+c1}{\PYZsh{}Source coordinates}
        \PY{n}{src1} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{200}\PY{p}{,}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}
        \PY{n}{src2} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{550}\PY{p}{,}\PY{l+m+mi}{480}\PY{p}{]}
        \PY{n}{src3} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{735}\PY{p}{,}\PY{l+m+mi}{480}\PY{p}{]}
        \PY{n}{src4} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{1120}\PY{p}{,}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}
        \PY{n}{src} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{float32}\PY{p}{(}\PY{p}{[}\PY{n}{src1}\PY{p}{,}\PY{n}{src2}\PY{p}{,}\PY{n}{src3}\PY{p}{,}\PY{n}{src4}\PY{p}{]}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{}Destination coordinates}
        \PY{n}{offset} \PY{o}{=} \PY{l+m+mi}{400}
        \PY{n}{dst1} \PY{o}{=}\PY{p}{[}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{2}\PY{o}{\PYZhy{}}\PY{n}{offset}\PY{p}{,}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}
        \PY{n}{dst2} \PY{o}{=} \PY{p}{[}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{2}\PY{o}{\PYZhy{}}\PY{n}{offset}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{]}
        \PY{n}{dst3} \PY{o}{=} \PY{p}{[}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{2}\PY{o}{+}\PY{n}{offset}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{]}
        \PY{n}{dst4} \PY{o}{=} \PY{p}{[}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{2}\PY{o}{+}\PY{n}{offset}\PY{p}{,}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}
        \PY{n}{dst} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{float32}\PY{p}{(}\PY{p}{[}\PY{n}{dst1}\PY{p}{,}\PY{n}{dst2}\PY{p}{,}\PY{n}{dst3}\PY{p}{,}\PY{n}{dst4}\PY{p}{]}\PY{p}{)}
        
        \PY{n}{f}\PY{p}{,} \PY{p}{(}\PY{n}{ax1}\PY{p}{,} \PY{n}{ax2}\PY{p}{)} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Combined Binary with original perspective points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{l+m+mi}{200}\PY{p}{,}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{l+m+mi}{550}\PY{p}{,}\PY{l+m+mi}{480}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{l+m+mi}{735}\PY{p}{,}\PY{l+m+mi}{480}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{l+m+mi}{1120}\PY{p}{,}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{combined\PYZus{}binary}\PY{p}{)}
        
        \PY{n}{ax2}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Combined Binary with final perspective points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax2}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{combined\PYZus{}binary}\PY{p}{)}
        \PY{n}{ax2}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{2}\PY{o}{\PYZhy{}}\PY{n}{offset}\PY{p}{,}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax2}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{2}\PY{o}{\PYZhy{}}\PY{n}{offset}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax2}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{2}\PY{o}{+}\PY{n}{offset}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax2}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{2}\PY{o}{+}\PY{n}{offset}\PY{p}{,}\PY{n}{combined\PYZus{}binary}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{}warp the image}
        \PY{n}{warped} \PY{o}{=} \PY{n}{warp}\PY{p}{(}\PY{n}{combined\PYZus{}binary}\PY{p}{,}\PY{n}{src}\PY{p}{,}\PY{n}{dst}\PY{p}{)}
        \PY{n}{warped\PYZus{}org} \PY{o}{=} \PY{n}{warp}\PY{p}{(}\PY{n}{img}\PY{p}{,}\PY{n}{src}\PY{p}{,}\PY{n}{dst}\PY{p}{)}
        \PY{n}{unwarped} \PY{o}{=} \PY{n}{unwarp}\PY{p}{(}\PY{n}{warped}\PY{p}{,}\PY{n}{src}\PY{p}{,}\PY{n}{dst}\PY{p}{)}
        \PY{n}{f}\PY{p}{,} \PY{p}{(}\PY{n}{ax1}\PY{p}{,} \PY{n}{ax2}\PY{p}{,}\PY{n}{ax3}\PY{p}{)} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{3}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Warped image}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax1}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{warped}\PY{p}{)}
        \PY{n}{ax2}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Unwarped image}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax2}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{unwarped}\PY{p}{)}
        
        \PY{n}{ax3}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Warped original image}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax3}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{warped\PYZus{}org}\PY{p}{)}
            
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}7}]:} <matplotlib.image.AxesImage at 0x83ea240>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{step-6-find-lines}{%
\subsection{Step 6: Find Lines}\label{step-6-find-lines}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}25}]:} \PY{k}{def} \PY{n+nf}{findLaneLines} \PY{p}{(}\PY{n}{warped} \PY{p}{,}\PY{n}{nwindows}\PY{p}{,}\PY{n}{margin}\PY{p}{,}\PY{n}{minpix}\PY{p}{,}\PY{n}{ym\PYZus{}per\PYZus{}pix}\PY{p}{,}\PY{n}{xm\PYZus{}per\PYZus{}pix} \PY{p}{,}\PY{n}{enablePlot} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}\PY{p}{:}
             \PY{c+c1}{\PYZsh{} Take a histogram of the bottom half of the image}
             \PY{n}{histogram} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{warped}\PY{p}{[}\PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
             
             
         
             \PY{c+c1}{\PYZsh{} Create an output image to draw on and  visualize the result}
             \PY{n}{out\PYZus{}img} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{dstack}\PY{p}{(}\PY{p}{(}\PY{n}{warped}\PY{p}{,} \PY{n}{warped}\PY{p}{,} \PY{n}{warped}\PY{p}{)}\PY{p}{)}\PY{o}{*}\PY{l+m+mi}{255}
         
             \PY{c+c1}{\PYZsh{} Find the peak of the left and right halves of the histogram}
             \PY{c+c1}{\PYZsh{} These will be the starting point for the left and right lines}
             \PY{n}{midpoint} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{int}\PY{p}{(}\PY{n}{histogram}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{)}
             \PY{n}{leftx\PYZus{}base} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{argmax}\PY{p}{(}\PY{n}{histogram}\PY{p}{[}\PY{p}{:}\PY{n}{midpoint}\PY{p}{]}\PY{p}{)}
             \PY{n}{rightx\PYZus{}base} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{argmax}\PY{p}{(}\PY{n}{histogram}\PY{p}{[}\PY{n}{midpoint}\PY{p}{:}\PY{p}{]}\PY{p}{)} \PY{o}{+} \PY{n}{midpoint}
             
             \PY{k}{if} \PY{p}{(}\PY{n}{rightx\PYZus{}base} \PY{o}{\PYZlt{}}\PY{l+m+mi}{850}\PY{p}{)}\PY{p}{:}
                 \PY{c+c1}{\PYZsh{} Take a histogram of the up half of the image}
                 \PY{n}{histogram} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{warped}\PY{p}{[}\PY{p}{:}\PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{,}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}    
                 \PY{n}{rightx\PYZus{}base} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{argmax}\PY{p}{(}\PY{n}{histogram}\PY{p}{[}\PY{n}{midpoint}\PY{p}{:}\PY{p}{]}\PY{p}{)} \PY{o}{+} \PY{n}{midpoint}  
         
             \PY{k}{if} \PY{p}{(}\PY{n}{leftx\PYZus{}base} \PY{o}{\PYZgt{}}\PY{l+m+mi}{500}\PY{p}{)}\PY{p}{:}
                 \PY{c+c1}{\PYZsh{} Take a histogram of the up half of the image}
                 \PY{n}{histogram} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{warped}\PY{p}{[}\PY{p}{:}\PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{,}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
                 \PY{n}{leftx\PYZus{}base} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{argmax}\PY{p}{(}\PY{n}{histogram}\PY{p}{[}\PY{p}{:}\PY{n}{midpoint}\PY{p}{]}\PY{p}{)} \PY{o}{+} \PY{n}{midpoint} 
             \PY{k}{if}  \PY{n}{enablePlot} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{histogram}\PY{p}{)}
         
             \PY{c+c1}{\PYZsh{} Set height of windows}
             \PY{n}{window\PYZus{}height} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{int}\PY{p}{(}\PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{n}{nwindows}\PY{p}{)}
             \PY{c+c1}{\PYZsh{} Identify the x and y positions of all nonzero pixels in the image}
             \PY{n}{nonzero} \PY{o}{=} \PY{n}{warped}\PY{o}{.}\PY{n}{nonzero}\PY{p}{(}\PY{p}{)}
             \PY{n}{nonzeroy} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{nonzero}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
             \PY{n}{nonzerox} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{nonzero}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
         
         
             \PY{c+c1}{\PYZsh{} Current positions to be updated for each window}
             \PY{n}{leftx\PYZus{}current} \PY{o}{=} \PY{n}{leftx\PYZus{}base}
             \PY{n}{rightx\PYZus{}current} \PY{o}{=} \PY{n}{rightx\PYZus{}base}
         
             \PY{c+c1}{\PYZsh{} Create empty lists to receive left and right lane pixel indices}
             \PY{n}{left\PYZus{}lane\PYZus{}inds} \PY{o}{=} \PY{p}{[}\PY{p}{]}
             \PY{n}{right\PYZus{}lane\PYZus{}inds} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         
         
             \PY{c+c1}{\PYZsh{} Step through the windows one by one}
             \PY{k}{for} \PY{n}{window} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{nwindows}\PY{p}{)}\PY{p}{:}
                 \PY{c+c1}{\PYZsh{} Identify window boundaries in x and y (and right and left)}
                 \PY{n}{win\PYZus{}y\PYZus{}low} \PY{o}{=} \PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{p}{(}\PY{n}{window}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{*}\PY{n}{window\PYZus{}height}
                 \PY{n}{win\PYZus{}y\PYZus{}high} \PY{o}{=} \PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{window}\PY{o}{*}\PY{n}{window\PYZus{}height}
                 \PY{n}{win\PYZus{}xleft\PYZus{}low} \PY{o}{=} \PY{n}{leftx\PYZus{}current} \PY{o}{\PYZhy{}} \PY{n}{margin}
                 \PY{n}{win\PYZus{}xleft\PYZus{}high} \PY{o}{=} \PY{n}{leftx\PYZus{}current} \PY{o}{+} \PY{n}{margin}
                 \PY{n}{win\PYZus{}xright\PYZus{}low} \PY{o}{=} \PY{n}{rightx\PYZus{}current} \PY{o}{\PYZhy{}} \PY{n}{margin}
                 \PY{n}{win\PYZus{}xright\PYZus{}high} \PY{o}{=} \PY{n}{rightx\PYZus{}current} \PY{o}{+} \PY{n}{margin}
                 \PY{c+c1}{\PYZsh{} Draw the windows on the visualization image}
                 \PY{n}{cv2}\PY{o}{.}\PY{n}{rectangle}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{,}\PY{p}{(}\PY{n}{win\PYZus{}xleft\PYZus{}low}\PY{p}{,}\PY{n}{win\PYZus{}y\PYZus{}low}\PY{p}{)}\PY{p}{,}\PY{p}{(}\PY{n}{win\PYZus{}xleft\PYZus{}high}\PY{p}{,}\PY{n}{win\PYZus{}y\PYZus{}high}\PY{p}{)}\PY{p}{,}
                 \PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{255}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)} 
                 \PY{n}{cv2}\PY{o}{.}\PY{n}{rectangle}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{,}\PY{p}{(}\PY{n}{win\PYZus{}xright\PYZus{}low}\PY{p}{,}\PY{n}{win\PYZus{}y\PYZus{}low}\PY{p}{)}\PY{p}{,}\PY{p}{(}\PY{n}{win\PYZus{}xright\PYZus{}high}\PY{p}{,}\PY{n}{win\PYZus{}y\PYZus{}high}\PY{p}{)}\PY{p}{,}
                 \PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{255}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)} 
                 \PY{c+c1}{\PYZsh{} Identify the nonzero pixels in x and y within the window}
                 \PY{n}{good\PYZus{}left\PYZus{}inds} \PY{o}{=} \PY{p}{(}\PY{p}{(}\PY{n}{nonzeroy} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{win\PYZus{}y\PYZus{}low}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{nonzeroy} \PY{o}{\PYZlt{}} \PY{n}{win\PYZus{}y\PYZus{}high}\PY{p}{)} \PY{o}{\PYZam{}} 
                 \PY{p}{(}\PY{n}{nonzerox} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{win\PYZus{}xleft\PYZus{}low}\PY{p}{)} \PY{o}{\PYZam{}}  \PY{p}{(}\PY{n}{nonzerox} \PY{o}{\PYZlt{}} \PY{n}{win\PYZus{}xleft\PYZus{}high}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{nonzero}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
                 \PY{n}{good\PYZus{}right\PYZus{}inds} \PY{o}{=} \PY{p}{(}\PY{p}{(}\PY{n}{nonzeroy} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{win\PYZus{}y\PYZus{}low}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{nonzeroy} \PY{o}{\PYZlt{}} \PY{n}{win\PYZus{}y\PYZus{}high}\PY{p}{)} \PY{o}{\PYZam{}} 
                 \PY{p}{(}\PY{n}{nonzerox} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{win\PYZus{}xright\PYZus{}low}\PY{p}{)} \PY{o}{\PYZam{}}  \PY{p}{(}\PY{n}{nonzerox} \PY{o}{\PYZlt{}} \PY{n}{win\PYZus{}xright\PYZus{}high}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{nonzero}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
                 \PY{c+c1}{\PYZsh{} Append these indices to the lists}
                 \PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{good\PYZus{}left\PYZus{}inds}\PY{p}{)}
                 \PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{good\PYZus{}right\PYZus{}inds}\PY{p}{)}
                 \PY{c+c1}{\PYZsh{} If you found \PYZgt{} minpix pixels, recenter next window on their mean position}
                 \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{good\PYZus{}left\PYZus{}inds}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{minpix}\PY{p}{:}
                     \PY{n}{leftx\PYZus{}current} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{int}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{nonzerox}\PY{p}{[}\PY{n}{good\PYZus{}left\PYZus{}inds}\PY{p}{]}\PY{p}{)}\PY{p}{)}
                 \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{good\PYZus{}right\PYZus{}inds}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{minpix}\PY{p}{:}        
                     \PY{n}{rightx\PYZus{}current} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{int}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{nonzerox}\PY{p}{[}\PY{n}{good\PYZus{}right\PYZus{}inds}\PY{p}{]}\PY{p}{)}\PY{p}{)}
         
             \PY{c+c1}{\PYZsh{} Concatenate the arrays of indices}
             \PY{n}{left\PYZus{}lane\PYZus{}inds} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{concatenate}\PY{p}{(}\PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{p}{)}
             \PY{n}{right\PYZus{}lane\PYZus{}inds} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{concatenate}\PY{p}{(}\PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{p}{)}
         
             \PY{c+c1}{\PYZsh{} Extract left and right line pixel positions}
             \PY{n}{leftx} \PY{o}{=} \PY{n}{nonzerox}\PY{p}{[}\PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{p}{]}
             \PY{n}{lefty} \PY{o}{=} \PY{n}{nonzeroy}\PY{p}{[}\PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{p}{]} 
             \PY{n}{rightx} \PY{o}{=} \PY{n}{nonzerox}\PY{p}{[}\PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{p}{]}
             \PY{n}{righty} \PY{o}{=} \PY{n}{nonzeroy}\PY{p}{[}\PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{p}{]} 
         
             \PY{c+c1}{\PYZsh{} Fit a second order polynomial to each}
             \PY{n}{left\PYZus{}fit} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{lefty}\PY{p}{,} \PY{n}{leftx}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
             \PY{n}{right\PYZus{}fit} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{righty}\PY{p}{,} \PY{n}{rightx}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
             
             \PY{c+c1}{\PYZsh{} Fit new polynomials to x,y in world space}
             \PY{n}{left\PYZus{}fit\PYZus{}cr} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{lefty}\PY{o}{*}\PY{n}{ym\PYZus{}per\PYZus{}pix}\PY{p}{,} \PY{n}{leftx}\PY{o}{*}\PY{n}{xm\PYZus{}per\PYZus{}pix}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
             \PY{n}{right\PYZus{}fit\PYZus{}cr} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{righty}\PY{o}{*}\PY{n}{ym\PYZus{}per\PYZus{}pix}\PY{p}{,} \PY{n}{rightx}\PY{o}{*}\PY{n}{xm\PYZus{}per\PYZus{}pix}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
         
             \PY{n}{out\PYZus{}img}\PY{p}{[}\PY{n}{nonzeroy}\PY{p}{[}\PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{p}{]}\PY{p}{,} \PY{n}{nonzerox}\PY{p}{[}\PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{255}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}
             \PY{n}{out\PYZus{}img}\PY{p}{[}\PY{n}{nonzeroy}\PY{p}{[}\PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{p}{]}\PY{p}{,} \PY{n}{nonzerox}\PY{p}{[}\PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{255}\PY{p}{]}
             
             \PY{k}{return} \PY{n}{left\PYZus{}fit}\PY{p}{,} \PY{n}{right\PYZus{}fit}\PY{p}{,}\PY{n}{left\PYZus{}fit\PYZus{}cr}\PY{p}{,}\PY{n}{right\PYZus{}fit\PYZus{}cr}\PY{p}{,}\PY{n}{out\PYZus{}img}
         
         \PY{c+c1}{\PYZsh{}TEST THE FUNCTION findLaneLines}
         
         \PY{c+c1}{\PYZsh{} Choose the number of sliding windows}
         \PY{n}{nwindows} \PY{o}{=} \PY{l+m+mi}{9}
         \PY{c+c1}{\PYZsh{} Set the width of the windows +/\PYZhy{} margin}
         \PY{n}{margin} \PY{o}{=} \PY{l+m+mi}{100}
         \PY{c+c1}{\PYZsh{} Set minimum number of pixels found to recenter window}
         \PY{n}{minpix} \PY{o}{=} \PY{l+m+mi}{50}
         
         \PY{c+c1}{\PYZsh{} Define conversions in x and y from pixels space to meters}
         \PY{n}{ym\PYZus{}per\PYZus{}pix} \PY{o}{=} \PY{l+m+mi}{30}\PY{o}{/}\PY{l+m+mi}{720} \PY{c+c1}{\PYZsh{} meters per pixel in y dimension}
         \PY{n}{xm\PYZus{}per\PYZus{}pix} \PY{o}{=} \PY{l+m+mf}{3.7}\PY{o}{/}\PY{l+m+mi}{700} \PY{c+c1}{\PYZsh{} meters per pixel in x dimension}
         
         \PY{n}{left\PYZus{}fit}\PY{p}{,} \PY{n}{right\PYZus{}fit}\PY{p}{,}\PY{n}{left\PYZus{}fit\PYZus{}cr}\PY{p}{,}\PY{n}{right\PYZus{}fit\PYZus{}cr}\PY{p}{,}\PY{n}{out\PYZus{}img} \PY{o}{=} \PY{n}{findLaneLines} \PY{p}{(}\PY{n}{warped} \PY{p}{,}\PY{n}{nwindows}\PY{p}{,}\PY{n}{margin}\PY{p}{,}\PY{n}{minpix}\PY{p}{,}\PY{n}{ym\PYZus{}per\PYZus{}pix}\PY{p}{,}\PY{n}{xm\PYZus{}per\PYZus{}pix} \PY{p}{,}\PY{k+kc}{True}\PY{p}{)}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}25}]:} <matplotlib.image.AxesImage at 0xa70f2b0>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_16_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_16_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{visualization}{%
\subsubsection{Visualization}\label{visualization}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}26}]:} \PY{c+c1}{\PYZsh{} Generate x and y values for plotting}
         \PY{n}{ploty} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{p}{)}
         \PY{n}{left\PYZus{}fitx} \PY{o}{=} \PY{n}{left\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{*}\PY{n}{ploty}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{left\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{*}\PY{n}{ploty} \PY{o}{+} \PY{n}{left\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}
         \PY{n}{right\PYZus{}fitx} \PY{o}{=} \PY{n}{right\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{*}\PY{n}{ploty}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{right\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{*}\PY{n}{ploty} \PY{o}{+} \PY{n}{right\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{left\PYZus{}fitx}\PY{p}{,} \PY{n}{ploty}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{right\PYZus{}fitx}\PY{p}{,} \PY{n}{ploty}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlim}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{1280}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylim}\PY{p}{(}\PY{l+m+mi}{720}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}26}]:} (720, 0)
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_18_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}27}]:} \PY{c+c1}{\PYZsh{} Create an image to draw on and an image to show the selection window}
         \PY{n}{out\PYZus{}img} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{dstack}\PY{p}{(}\PY{p}{(}\PY{n}{warped}\PY{p}{,} \PY{n}{warped}\PY{p}{,} \PY{n}{warped}\PY{p}{)}\PY{p}{)}\PY{o}{*}\PY{l+m+mi}{255}
         \PY{n}{window\PYZus{}img} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} Color in left and right line pixels}
         
         
         \PY{c+c1}{\PYZsh{} Generate a polygon to illustrate the search window area}
         \PY{c+c1}{\PYZsh{} And recast the x and y points into usable format for cv2.fillPoly()}
         \PY{n}{left\PYZus{}line\PYZus{}window1} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{transpose}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{[}\PY{n}{left\PYZus{}fitx}\PY{o}{\PYZhy{}}\PY{n}{margin}\PY{p}{,} \PY{n}{ploty}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         \PY{n}{left\PYZus{}line\PYZus{}window2} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{flipud}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{transpose}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{[}\PY{n}{left\PYZus{}fitx}\PY{o}{+}\PY{n}{margin}\PY{p}{,} 
                                       \PY{n}{ploty}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         \PY{n}{left\PYZus{}line\PYZus{}pts} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{hstack}\PY{p}{(}\PY{p}{(}\PY{n}{left\PYZus{}line\PYZus{}window1}\PY{p}{,} \PY{n}{left\PYZus{}line\PYZus{}window2}\PY{p}{)}\PY{p}{)}
         \PY{n}{right\PYZus{}line\PYZus{}window1} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{transpose}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{[}\PY{n}{right\PYZus{}fitx}\PY{o}{\PYZhy{}}\PY{n}{margin}\PY{p}{,} \PY{n}{ploty}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         \PY{n}{right\PYZus{}line\PYZus{}window2} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{flipud}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{transpose}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{[}\PY{n}{right\PYZus{}fitx}\PY{o}{+}\PY{n}{margin}\PY{p}{,} 
                                       \PY{n}{ploty}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         \PY{n}{right\PYZus{}line\PYZus{}pts} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{hstack}\PY{p}{(}\PY{p}{(}\PY{n}{right\PYZus{}line\PYZus{}window1}\PY{p}{,} \PY{n}{right\PYZus{}line\PYZus{}window2}\PY{p}{)}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Draw the lane onto the warped blank image}
         \PY{n}{cv2}\PY{o}{.}\PY{n}{fillPoly}\PY{p}{(}\PY{n}{window\PYZus{}img}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{int\PYZus{}}\PY{p}{(}\PY{p}{[}\PY{n}{left\PYZus{}line\PYZus{}pts}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{255}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}\PY{p}{)}
         \PY{n}{cv2}\PY{o}{.}\PY{n}{fillPoly}\PY{p}{(}\PY{n}{window\PYZus{}img}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{int\PYZus{}}\PY{p}{(}\PY{p}{[}\PY{n}{right\PYZus{}line\PYZus{}pts}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{255}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}\PY{p}{)}
         
         
         \PY{n}{filled\PYZus{}img}\PY{p}{,}\PY{n}{window\PYZus{}img} \PY{o}{=} \PY{n}{fillRoad}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{,}\PY{n}{left\PYZus{}fitx}\PY{p}{,}\PY{n}{right\PYZus{}fitx}\PY{p}{,}\PY{n}{ploty}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}filled\PYZus{}img = filled\PYZus{}img[:,int(img.shape[1]/2\PYZhy{}400):int(img.shape[1]/2+400)]}
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(} \PY{n}{filled\PYZus{}img}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{left\PYZus{}fitx}\PY{p}{,} \PY{n}{ploty}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{right\PYZus{}fitx}\PY{p}{,} \PY{n}{ploty}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{n}{result} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{addWeighted}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{n}{window\PYZus{}img}\PY{p}{,} \PY{l+m+mf}{0.3}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{result}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{left\PYZus{}fitx}\PY{p}{,} \PY{n}{ploty}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{right\PYZus{}fitx}\PY{p}{,} \PY{n}{ploty}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlim}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{1280}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylim}\PY{p}{(}\PY{l+m+mi}{720}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{result2} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{addWeighted}\PY{p}{(}\PY{n}{warped\PYZus{}org}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{n}{window\PYZus{}img}\PY{p}{,} \PY{l+m+mf}{0.3}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{result2}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}27}]:} <matplotlib.image.AxesImage at 0xe07d6d8>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_19_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_19_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_19_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}30}]:} \PY{k}{def} \PY{n+nf}{calculateRadius}\PY{p}{(}\PY{n}{warped}\PY{p}{,}\PY{n}{left\PYZus{}fit}\PY{p}{,}\PY{n}{right\PYZus{}fit}\PY{p}{,}\PY{n}{ym\PYZus{}per\PYZus{}pix}\PY{p}{)}\PY{p}{:}
             \PY{c+c1}{\PYZsh{} Define y\PYZhy{}value where we want radius of curvature}
             \PY{c+c1}{\PYZsh{} I\PYZsq{}ll choose the maximum y\PYZhy{}value, corresponding to the bottom of the image}
             \PY{n}{ploty} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{p}{)}
            
             \PY{n}{y\PYZus{}eval} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{n}{ploty}\PY{p}{)}
             
             \PY{n}{left\PYZus{}curverad} \PY{o}{=} \PY{p}{(}\PY{p}{(}\PY{l+m+mi}{1} \PY{o}{+} \PY{p}{(}\PY{l+m+mi}{2}\PY{o}{*}\PY{n}{left\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{*}\PY{n}{ym\PYZus{}per\PYZus{}pix}\PY{o}{*}\PY{n}{y\PYZus{}eval} \PY{o}{+} \PY{n}{left\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mf}{1.5}\PY{p}{)} \PY{o}{/} \PY{n}{np}\PY{o}{.}\PY{n}{absolute}\PY{p}{(}\PY{l+m+mi}{2}\PY{o}{*}\PY{n}{left\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
         
             \PY{n}{right\PYZus{}curverad} \PY{o}{=} \PY{p}{(}\PY{p}{(}\PY{l+m+mi}{1} \PY{o}{+} \PY{p}{(}\PY{l+m+mi}{2}\PY{o}{*}\PY{n}{right\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{*}\PY{n}{ym\PYZus{}per\PYZus{}pix}\PY{o}{*}\PY{n}{y\PYZus{}eval} \PY{o}{+} \PY{n}{right\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mf}{1.5}\PY{p}{)} \PY{o}{/} \PY{n}{np}\PY{o}{.}\PY{n}{absolute}\PY{p}{(}\PY{l+m+mi}{2}\PY{o}{*}\PY{n}{right\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
             \PY{k}{return} \PY{n}{left\PYZus{}curverad}\PY{p}{,}\PY{n}{right\PYZus{}curverad}
         
         \PY{n}{left\PYZus{}curverad}\PY{p}{,} \PY{n}{right\PYZus{}curverad} \PY{o}{=} \PY{n}{calculateRadius}\PY{p}{(}\PY{n}{warped}\PY{p}{,}\PY{n}{left\PYZus{}fit\PYZus{}cr}\PY{p}{,}\PY{n}{right\PYZus{}fit\PYZus{}cr}\PY{p}{,}\PY{n}{ym\PYZus{}per\PYZus{}pix}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{left\PYZus{}curverad}\PY{p}{,} \PY{n}{right\PYZus{}curverad}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
1293.13636813 2335.19066809

    \end{Verbatim}

    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{step-7-test-on-the-video}{%
\subsection{Step 7: Test on the video}\label{step-7-test-on-the-video}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}34}]:} \PY{c+c1}{\PYZsh{}Read the frames of the video}
         \PY{n}{VideoPath} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{./CarND\PYZhy{}Advanced\PYZhy{}Lane\PYZhy{}Lines\PYZhy{}master/project\PYZus{}video.mp4}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{video} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{VideoCapture}\PY{p}{(}\PY{n}{VideoPath}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}Numframe = 614}
         \PY{c+c1}{\PYZsh{}video.set(cv2.CAP\PYZus{}PROP\PYZus{}POS\PYZus{}FRAMES,Numframe)}
         \PY{n}{ret}\PY{p}{,} \PY{n}{frame} \PY{o}{=}\PY{n}{video}\PY{o}{.}\PY{n}{read}\PY{p}{(}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}MOSTRAR RESUMO DO VIDEO}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{===========================================================}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Frame Shape:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{n}{frame}\PY{o}{.}\PY{n}{shape}\PY{p}{)}
         \PY{n}{TotalFrames} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{video}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{n}{cv2}\PY{o}{.}\PY{n}{CAP\PYZus{}PROP\PYZus{}FRAME\PYZus{}COUNT}\PY{p}{)}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Total de frames:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{n}{TotalFrames}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{FPS: }\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{n+nb}{int}\PY{p}{(}\PY{n}{video}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{n}{cv2}\PY{o}{.}\PY{n}{CAP\PYZus{}PROP\PYZus{}FPS}\PY{p}{)}\PY{p}{)}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{===========================================================}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         
         
         \PY{c+c1}{\PYZsh{}name of the output video}
         \PY{n}{fourcc} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{VideoWriter\PYZus{}fourcc}\PY{p}{(}\PY{o}{*}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DIVX}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{video\PYZus{}out} \PY{o}{=}\PY{n}{cv2}\PY{o}{.}\PY{n}{VideoWriter}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{result3.mp4}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{fourcc}\PY{p}{,}\PY{n}{video}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{n}{cv2}\PY{o}{.}\PY{n}{CAP\PYZus{}PROP\PYZus{}FPS}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{n}{frame}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,}\PY{n}{frame}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{)}
         
         
         
         
         
         \PY{c+c1}{\PYZsh{}Define thresholds max and min for binary image construction}
         \PY{n}{thresh\PYZus{}min} \PY{o}{=} \PY{l+m+mi}{45}
         \PY{n}{thresh\PYZus{}max} \PY{o}{=} \PY{l+m+mi}{100}
         \PY{n}{s\PYZus{}thresh\PYZus{}min} \PY{o}{=} \PY{l+m+mi}{170}
         \PY{n}{s\PYZus{}thresh\PYZus{}max} \PY{o}{=} \PY{l+m+mi}{255}
         
         \PY{c+c1}{\PYZsh{} Choose the number of sliding windows}
         \PY{n}{nwindows} \PY{o}{=} \PY{l+m+mi}{9}
         \PY{c+c1}{\PYZsh{} Set the width of the windows +/\PYZhy{} margin}
         \PY{n}{margin} \PY{o}{=} \PY{l+m+mi}{100}
         \PY{c+c1}{\PYZsh{} Set minimum number of pixels found to recenter window}
         \PY{n}{minpix} \PY{o}{=} \PY{l+m+mi}{50}
         \PY{n}{countFrames} \PY{o}{=} \PY{l+m+mi}{0} 
         \PY{n}{ENABLE\PYZus{}PLOT} \PY{o}{=} \PY{k+kc}{False}
         
         \PY{k}{while}\PY{p}{(}\PY{n}{ret} \PY{o}{==} \PY{k+kc}{True}\PY{p}{)}\PY{p}{:}
             
             
             \PY{c+c1}{\PYZsh{}Undistort the image}
             \PY{n}{undist} \PY{o}{=} \PY{n}{cal\PYZus{}undistort}\PY{p}{(}\PY{n}{frame}\PY{p}{,}\PY{n}{objpoints}\PY{p}{,}\PY{n}{imgpoints}\PY{p}{)}
             
             \PY{c+c1}{\PYZsh{}Creating binary image}
             \PY{n}{color\PYZus{}binary}\PY{p}{,}\PY{n}{combined\PYZus{}binary} \PY{o}{=}\PY{n}{CreateBinaryImage}\PY{p}{(}\PY{n}{undist}\PY{p}{,}\PY{n}{thresh\PYZus{}min}\PY{p}{,}\PY{n}{thresh\PYZus{}max}\PY{p}{,}\PY{n}{s\PYZus{}thresh\PYZus{}min}\PY{p}{,}\PY{n}{s\PYZus{}thresh\PYZus{}max}\PY{p}{)}
             
             \PY{c+c1}{\PYZsh{}warp the image}
             \PY{n}{warped} \PY{o}{=} \PY{n}{warp}\PY{p}{(}\PY{n}{combined\PYZus{}binary}\PY{p}{,}\PY{n}{src}\PY{p}{,}\PY{n}{dst}\PY{p}{)}
            
             \PY{c+c1}{\PYZsh{}warp the image original}
             \PY{n}{warped\PYZus{}original} \PY{o}{=} \PY{n}{warp}\PY{p}{(}\PY{n}{frame}\PY{p}{,}\PY{n}{src}\PY{p}{,}\PY{n}{dst}\PY{p}{)}
             
             \PY{c+c1}{\PYZsh{}find lane lines}
             \PY{n}{left\PYZus{}fit}\PY{p}{,} \PY{n}{right\PYZus{}fit}\PY{p}{,}\PY{n}{left\PYZus{}fit\PYZus{}cr}\PY{p}{,}\PY{n}{right\PYZus{}fit\PYZus{}cr}\PY{p}{,}\PY{n}{out\PYZus{}img} \PY{o}{=} \PY{n}{findLaneLines} \PY{p}{(}\PY{n}{warped} \PY{p}{,}\PY{n}{nwindows}\PY{p}{,}\PY{n}{margin}\PY{p}{,}\PY{n}{minpix}\PY{p}{,}\PY{n}{ym\PYZus{}per\PYZus{}pix}\PY{p}{,}\PY{n}{xm\PYZus{}per\PYZus{}pix}\PY{p}{)}
         
             
             \PY{c+c1}{\PYZsh{} Generate x and y values for plotting}
             \PY{n}{ploty} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{p}{)}
             \PY{n}{left\PYZus{}fitx} \PY{o}{=} \PY{n}{left\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{*}\PY{n}{ploty}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{left\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{*}\PY{n}{ploty} \PY{o}{+} \PY{n}{left\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}
             \PY{n}{right\PYZus{}fitx} \PY{o}{=} \PY{n}{right\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{*}\PY{n}{ploty}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{right\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{*}\PY{n}{ploty} \PY{o}{+} \PY{n}{right\PYZus{}fit}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]} 
             
             \PY{c+c1}{\PYZsh{}fill the road detection}
             \PY{n}{filled\PYZus{}img}\PY{p}{,}\PY{n}{window\PYZus{}img} \PY{o}{=} \PY{n}{fillRoad}\PY{p}{(}\PY{n}{warped\PYZus{}original}\PY{p}{,}\PY{n}{left\PYZus{}fitx}\PY{p}{,}\PY{n}{right\PYZus{}fitx}\PY{p}{,}\PY{n}{ploty}\PY{p}{)}
             
             
             \PY{c+c1}{\PYZsh{}filled\PYZus{}img,window\PYZus{}img = fillRoad(warped\PYZus{}original,left\PYZus{}fitx,right\PYZus{}fitx,ploty)}
             
             
             \PY{c+c1}{\PYZsh{}Unwarp the image}
             \PY{n}{frame\PYZus{}out} \PY{o}{=} \PY{n}{frame}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
             \PY{n}{unwarped} \PY{o}{=} \PY{n}{unwarp}\PY{p}{(}\PY{n}{window\PYZus{}img}\PY{p}{,}\PY{n}{src}\PY{p}{,}\PY{n}{dst}\PY{p}{)}
             \PY{n}{frame\PYZus{}out}\PY{p}{[}\PY{n}{unwarped}\PY{o}{.}\PY{n}{nonzero}\PY{p}{(}\PY{p}{)}\PY{p}{]} \PY{o}{+}\PY{o}{=}\PY{l+m+mi}{100}
             
             \PY{c+c1}{\PYZsh{}calulate the radius}
             \PY{n}{left\PYZus{}curverad}\PY{p}{,} \PY{n}{right\PYZus{}curverad} \PY{o}{=} \PY{n}{calculateRadius}\PY{p}{(}\PY{n}{warped}\PY{p}{,}\PY{n}{left\PYZus{}fit}\PY{p}{,}\PY{n}{right\PYZus{}fit}\PY{p}{,}\PY{n}{ym\PYZus{}per\PYZus{}pix}\PY{p}{)}
             
             \PY{c+c1}{\PYZsh{}write the radius on the frame}
             \PY{n}{cv2}\PY{o}{.}\PY{n}{putText}\PY{p}{(}\PY{n}{frame\PYZus{}out}\PY{p}{,}\PY{n+nb}{str}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{L: }\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n+nb}{round}\PY{p}{(}\PY{n}{left\PYZus{}curverad}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{m}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{,}\PY{p}{(}\PY{l+m+mi}{100}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{)}\PY{p}{,} \PY{n}{cv2}\PY{o}{.}\PY{n}{FONT\PYZus{}HERSHEY\PYZus{}DUPLEX}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{255}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}\PY{p}{)}
             \PY{n}{cv2}\PY{o}{.}\PY{n}{putText}\PY{p}{(}\PY{n}{frame\PYZus{}out}\PY{p}{,}\PY{n+nb}{str}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{R: }\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n+nb}{round}\PY{p}{(}\PY{n}{right\PYZus{}curverad}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{m}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{,}\PY{p}{(}\PY{l+m+mi}{100}\PY{p}{,}\PY{l+m+mi}{200}\PY{p}{)}\PY{p}{,} \PY{n}{cv2}\PY{o}{.}\PY{n}{FONT\PYZus{}HERSHEY\PYZus{}DUPLEX}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{255}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}\PY{p}{)}
             \PY{n}{video\PYZus{}out}\PY{o}{.}\PY{n}{write}\PY{p}{(}\PY{n}{frame\PYZus{}out}\PY{p}{)}
         
             \PY{n}{countFrames} \PY{o}{=} \PY{n}{countFrames} \PY{o}{+}\PY{l+m+mi}{1}
             \PY{n+nb}{print}\PY{p}{(}\PY{n+nb}{str}\PY{p}{(}\PY{n}{countFrames}\PY{p}{)}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{/}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{n+nb}{str}\PY{p}{(}\PY{n}{TotalFrames}\PY{p}{)}\PY{p}{)}
             
             
             \PY{k}{if} \PY{n}{ENABLE\PYZus{}PLOT} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
                 
                 \PY{c+c1}{\PYZsh{}Original image}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{frame}\PY{p}{)}
                 
                 \PY{c+c1}{\PYZsh{}Undistorted image}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(} \PY{n}{undist}\PY{p}{)}
                 
                 \PY{c+c1}{\PYZsh{}Binary image}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(} \PY{n}{combined\PYZus{}binary}\PY{p}{)}
                 
                 \PY{c+c1}{\PYZsh{}Warp binary image}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(} \PY{n}{warped}\PY{p}{)}
                 
                 \PY{c+c1}{\PYZsh{}Warp original image}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(} \PY{n}{warped\PYZus{}original}\PY{p}{)}
                 
                 \PY{c+c1}{\PYZsh{}Lane Line detection}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{)}
                 
                 \PY{c+c1}{\PYZsh{}Road detection}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{filled\PYZus{}img}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{left\PYZus{}fitx}\PY{p}{,} \PY{n}{ploty}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{right\PYZus{}fitx}\PY{p}{,} \PY{n}{ploty}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                 
                 \PY{c+c1}{\PYZsh{}Undistort image}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{unwarped}\PY{p}{)}
                 
                 \PY{c+c1}{\PYZsh{}Undistort image}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{frame\PYZus{}out}\PY{p}{)}
                 
                 \PY{c+c1}{\PYZsh{}limit the quantity of images to be ploted}
                 \PY{k}{if} \PY{p}{(}\PY{n}{countFrames} \PY{o}{\PYZgt{}}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{:}
                     \PY{k}{break}
                     
             \PY{c+c1}{\PYZsh{}read next frame}
             \PY{n}{ret}\PY{p}{,} \PY{n}{frame} \PY{o}{=}\PY{n}{video}\PY{o}{.}\PY{n}{read}\PY{p}{(}\PY{p}{)}
             
             
         \PY{c+c1}{\PYZsh{}Save the video}
         \PY{n}{video\PYZus{}out}\PY{o}{.}\PY{n}{release}\PY{p}{(}\PY{p}{)} 
         \PY{n}{video}\PY{o}{.}\PY{n}{release}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
===========================================================
Frame Shape: (720, 1280, 3)
Total de frames: 1260
FPS:  25
===========================================================
1 / 1260
2 / 1260
3 / 1260
4 / 1260
5 / 1260
6 / 1260
7 / 1260
8 / 1260
9 / 1260
10 / 1260
11 / 1260
12 / 1260
13 / 1260
14 / 1260
15 / 1260
16 / 1260
17 / 1260
18 / 1260
19 / 1260
20 / 1260
21 / 1260
22 / 1260
23 / 1260
24 / 1260
25 / 1260
26 / 1260
27 / 1260
28 / 1260
29 / 1260
30 / 1260
31 / 1260
32 / 1260
33 / 1260
34 / 1260
35 / 1260
36 / 1260
37 / 1260
38 / 1260
39 / 1260
40 / 1260
41 / 1260
42 / 1260
43 / 1260
44 / 1260
45 / 1260
46 / 1260
47 / 1260
48 / 1260
49 / 1260
50 / 1260
51 / 1260
52 / 1260
53 / 1260
54 / 1260
55 / 1260
56 / 1260
57 / 1260
58 / 1260
59 / 1260
60 / 1260
61 / 1260
62 / 1260
63 / 1260
64 / 1260
65 / 1260
66 / 1260
67 / 1260
68 / 1260
69 / 1260
70 / 1260
71 / 1260
72 / 1260
73 / 1260
74 / 1260
75 / 1260
76 / 1260
77 / 1260
78 / 1260
79 / 1260
80 / 1260
81 / 1260
82 / 1260
83 / 1260
84 / 1260
85 / 1260
86 / 1260
87 / 1260
88 / 1260
89 / 1260
90 / 1260
91 / 1260
92 / 1260
93 / 1260
94 / 1260
95 / 1260
96 / 1260
97 / 1260
98 / 1260
99 / 1260
100 / 1260
101 / 1260
102 / 1260
103 / 1260
104 / 1260
105 / 1260
106 / 1260
107 / 1260
108 / 1260
109 / 1260
110 / 1260
111 / 1260
112 / 1260
113 / 1260
114 / 1260
115 / 1260
116 / 1260
117 / 1260
118 / 1260
119 / 1260
120 / 1260
121 / 1260
122 / 1260
123 / 1260
124 / 1260
125 / 1260
126 / 1260
127 / 1260
128 / 1260
129 / 1260
130 / 1260
131 / 1260
132 / 1260
133 / 1260
134 / 1260
135 / 1260
136 / 1260
137 / 1260
138 / 1260
139 / 1260
140 / 1260
141 / 1260
142 / 1260
143 / 1260
144 / 1260
145 / 1260
146 / 1260
147 / 1260
148 / 1260
149 / 1260
150 / 1260
151 / 1260
152 / 1260
153 / 1260
154 / 1260
155 / 1260
156 / 1260
157 / 1260
158 / 1260
159 / 1260
160 / 1260
161 / 1260
162 / 1260
163 / 1260
164 / 1260
165 / 1260
166 / 1260
167 / 1260
168 / 1260
169 / 1260
170 / 1260
171 / 1260
172 / 1260
173 / 1260
174 / 1260
175 / 1260
176 / 1260
177 / 1260
178 / 1260
179 / 1260
180 / 1260
181 / 1260
182 / 1260
183 / 1260
184 / 1260
185 / 1260
186 / 1260
187 / 1260
188 / 1260
189 / 1260
190 / 1260
191 / 1260
192 / 1260
193 / 1260
194 / 1260
195 / 1260
196 / 1260
197 / 1260
198 / 1260
199 / 1260
200 / 1260
201 / 1260
202 / 1260
203 / 1260
204 / 1260
205 / 1260
206 / 1260
207 / 1260
208 / 1260
209 / 1260
210 / 1260
211 / 1260
212 / 1260
213 / 1260
214 / 1260
215 / 1260
216 / 1260
217 / 1260
218 / 1260
219 / 1260
220 / 1260
221 / 1260
222 / 1260
223 / 1260
224 / 1260
225 / 1260
226 / 1260
227 / 1260
228 / 1260
229 / 1260
230 / 1260
231 / 1260
232 / 1260
233 / 1260
234 / 1260
235 / 1260
236 / 1260
237 / 1260
238 / 1260
239 / 1260
240 / 1260
241 / 1260
242 / 1260
243 / 1260
244 / 1260
245 / 1260
246 / 1260
247 / 1260
248 / 1260
249 / 1260
250 / 1260
251 / 1260
252 / 1260
253 / 1260
254 / 1260
255 / 1260
256 / 1260
257 / 1260
258 / 1260
259 / 1260
260 / 1260
261 / 1260
262 / 1260
263 / 1260
264 / 1260
265 / 1260
266 / 1260
267 / 1260
268 / 1260
269 / 1260
270 / 1260
271 / 1260
272 / 1260
273 / 1260
274 / 1260
275 / 1260
276 / 1260
277 / 1260
278 / 1260
279 / 1260
280 / 1260
281 / 1260
282 / 1260
283 / 1260
284 / 1260
285 / 1260
286 / 1260
287 / 1260
288 / 1260
289 / 1260
290 / 1260
291 / 1260
292 / 1260
293 / 1260
294 / 1260
295 / 1260
296 / 1260
297 / 1260
298 / 1260
299 / 1260
300 / 1260
301 / 1260
302 / 1260
303 / 1260
304 / 1260
305 / 1260
306 / 1260
307 / 1260
308 / 1260
309 / 1260
310 / 1260
311 / 1260
312 / 1260
313 / 1260
314 / 1260
315 / 1260
316 / 1260
317 / 1260
318 / 1260
319 / 1260
320 / 1260
321 / 1260
322 / 1260
323 / 1260
324 / 1260
325 / 1260
326 / 1260
327 / 1260
328 / 1260
329 / 1260
330 / 1260
331 / 1260
332 / 1260
333 / 1260
334 / 1260
335 / 1260
336 / 1260
337 / 1260
338 / 1260
339 / 1260
340 / 1260
341 / 1260
342 / 1260
343 / 1260
344 / 1260
345 / 1260
346 / 1260
347 / 1260
348 / 1260
349 / 1260
350 / 1260
351 / 1260
352 / 1260
353 / 1260
354 / 1260
355 / 1260
356 / 1260
357 / 1260
358 / 1260
359 / 1260
360 / 1260
361 / 1260
362 / 1260
363 / 1260
364 / 1260
365 / 1260
366 / 1260
367 / 1260
368 / 1260
369 / 1260
370 / 1260
371 / 1260
372 / 1260
373 / 1260
374 / 1260
375 / 1260
376 / 1260
377 / 1260
378 / 1260
379 / 1260
380 / 1260
381 / 1260
382 / 1260
383 / 1260
384 / 1260
385 / 1260
386 / 1260
387 / 1260
388 / 1260
389 / 1260
390 / 1260
391 / 1260
392 / 1260
393 / 1260
394 / 1260
395 / 1260
396 / 1260
397 / 1260
398 / 1260
399 / 1260
400 / 1260
401 / 1260
402 / 1260
403 / 1260
404 / 1260
405 / 1260
406 / 1260
407 / 1260
408 / 1260
409 / 1260
410 / 1260
411 / 1260
412 / 1260
413 / 1260
414 / 1260
415 / 1260
416 / 1260
417 / 1260
418 / 1260
419 / 1260
420 / 1260
421 / 1260
422 / 1260
423 / 1260
424 / 1260
425 / 1260
426 / 1260
427 / 1260
428 / 1260
429 / 1260
430 / 1260
431 / 1260
432 / 1260
433 / 1260
434 / 1260
435 / 1260
436 / 1260
437 / 1260
438 / 1260
439 / 1260
440 / 1260
441 / 1260
442 / 1260
443 / 1260
444 / 1260
445 / 1260
446 / 1260
447 / 1260
448 / 1260
449 / 1260
450 / 1260
451 / 1260
452 / 1260
453 / 1260
454 / 1260
455 / 1260
456 / 1260
457 / 1260
458 / 1260
459 / 1260
460 / 1260
461 / 1260
462 / 1260
463 / 1260
464 / 1260
465 / 1260
466 / 1260
467 / 1260
468 / 1260
469 / 1260
470 / 1260
471 / 1260
472 / 1260
473 / 1260
474 / 1260
475 / 1260
476 / 1260
477 / 1260
478 / 1260
479 / 1260
480 / 1260
481 / 1260
482 / 1260
483 / 1260
484 / 1260
485 / 1260
486 / 1260
487 / 1260
488 / 1260
489 / 1260
490 / 1260
491 / 1260
492 / 1260
493 / 1260
494 / 1260
495 / 1260
496 / 1260
497 / 1260
498 / 1260
499 / 1260
500 / 1260
501 / 1260
502 / 1260
503 / 1260
504 / 1260
505 / 1260
506 / 1260
507 / 1260
508 / 1260
509 / 1260
510 / 1260
511 / 1260
512 / 1260
513 / 1260
514 / 1260
515 / 1260
516 / 1260
517 / 1260
518 / 1260
519 / 1260
520 / 1260
521 / 1260
522 / 1260
523 / 1260
524 / 1260
525 / 1260
526 / 1260
527 / 1260
528 / 1260
529 / 1260
530 / 1260
531 / 1260
532 / 1260
533 / 1260
534 / 1260
535 / 1260
536 / 1260
537 / 1260
538 / 1260
539 / 1260
540 / 1260
541 / 1260
542 / 1260
543 / 1260
544 / 1260
545 / 1260
546 / 1260
547 / 1260
548 / 1260
549 / 1260
550 / 1260
551 / 1260
552 / 1260
553 / 1260
554 / 1260
555 / 1260
556 / 1260
557 / 1260
558 / 1260
559 / 1260
560 / 1260
561 / 1260
562 / 1260
563 / 1260
564 / 1260
565 / 1260
566 / 1260
567 / 1260
568 / 1260
569 / 1260
570 / 1260
571 / 1260
572 / 1260
573 / 1260
574 / 1260
575 / 1260
576 / 1260
577 / 1260
578 / 1260
579 / 1260
580 / 1260
581 / 1260
582 / 1260
583 / 1260
584 / 1260
585 / 1260
586 / 1260
587 / 1260
588 / 1260
589 / 1260
590 / 1260
591 / 1260
592 / 1260
593 / 1260
594 / 1260
595 / 1260
596 / 1260
597 / 1260
598 / 1260
599 / 1260
600 / 1260
601 / 1260
602 / 1260
603 / 1260
604 / 1260
605 / 1260
606 / 1260
607 / 1260
608 / 1260
609 / 1260
610 / 1260
611 / 1260
612 / 1260
613 / 1260
614 / 1260
615 / 1260
616 / 1260
617 / 1260
618 / 1260
619 / 1260
620 / 1260
621 / 1260
622 / 1260
623 / 1260
624 / 1260
625 / 1260
626 / 1260
627 / 1260
628 / 1260
629 / 1260
630 / 1260
631 / 1260
632 / 1260
633 / 1260
634 / 1260
635 / 1260
636 / 1260
637 / 1260
638 / 1260
639 / 1260
640 / 1260
641 / 1260
642 / 1260
643 / 1260
644 / 1260
645 / 1260
646 / 1260
647 / 1260
648 / 1260
649 / 1260
650 / 1260
651 / 1260
652 / 1260
653 / 1260
654 / 1260
655 / 1260
656 / 1260
657 / 1260
658 / 1260
659 / 1260
660 / 1260
661 / 1260
662 / 1260
663 / 1260
664 / 1260
665 / 1260
666 / 1260
667 / 1260
668 / 1260
669 / 1260
670 / 1260
671 / 1260
672 / 1260
673 / 1260
674 / 1260
675 / 1260
676 / 1260
677 / 1260
678 / 1260
679 / 1260
680 / 1260
681 / 1260
682 / 1260
683 / 1260
684 / 1260
685 / 1260
686 / 1260
687 / 1260
688 / 1260
689 / 1260
690 / 1260
691 / 1260
692 / 1260
693 / 1260
694 / 1260
695 / 1260
696 / 1260
697 / 1260
698 / 1260
699 / 1260
700 / 1260
701 / 1260
702 / 1260
703 / 1260
704 / 1260
705 / 1260
706 / 1260
707 / 1260
708 / 1260
709 / 1260
710 / 1260
711 / 1260
712 / 1260
713 / 1260
714 / 1260
715 / 1260
716 / 1260
717 / 1260
718 / 1260
719 / 1260
720 / 1260
721 / 1260
722 / 1260
723 / 1260
724 / 1260
725 / 1260
726 / 1260
727 / 1260
728 / 1260
729 / 1260
730 / 1260
731 / 1260
732 / 1260
733 / 1260
734 / 1260
735 / 1260
736 / 1260
737 / 1260
738 / 1260
739 / 1260
740 / 1260
741 / 1260
742 / 1260
743 / 1260
744 / 1260
745 / 1260
746 / 1260
747 / 1260
748 / 1260
749 / 1260
750 / 1260
751 / 1260
752 / 1260
753 / 1260
754 / 1260
755 / 1260
756 / 1260
757 / 1260
758 / 1260
759 / 1260
760 / 1260
761 / 1260
762 / 1260
763 / 1260
764 / 1260
765 / 1260
766 / 1260
767 / 1260
768 / 1260
769 / 1260
770 / 1260
771 / 1260
772 / 1260
773 / 1260
774 / 1260
775 / 1260
776 / 1260
777 / 1260
778 / 1260
779 / 1260
780 / 1260
781 / 1260
782 / 1260
783 / 1260
784 / 1260
785 / 1260
786 / 1260
787 / 1260
788 / 1260
789 / 1260
790 / 1260
791 / 1260
792 / 1260
793 / 1260
794 / 1260
795 / 1260
796 / 1260
797 / 1260
798 / 1260
799 / 1260
800 / 1260
801 / 1260
802 / 1260
803 / 1260
804 / 1260
805 / 1260
806 / 1260
807 / 1260
808 / 1260
809 / 1260
810 / 1260
811 / 1260
812 / 1260
813 / 1260
814 / 1260
815 / 1260
816 / 1260
817 / 1260
818 / 1260
819 / 1260
820 / 1260
821 / 1260
822 / 1260
823 / 1260
824 / 1260
825 / 1260
826 / 1260
827 / 1260
828 / 1260
829 / 1260
830 / 1260
831 / 1260
832 / 1260
833 / 1260
834 / 1260
835 / 1260
836 / 1260
837 / 1260
838 / 1260
839 / 1260
840 / 1260
841 / 1260
842 / 1260
843 / 1260
844 / 1260
845 / 1260
846 / 1260
847 / 1260
848 / 1260
849 / 1260
850 / 1260
851 / 1260
852 / 1260
853 / 1260
854 / 1260
855 / 1260
856 / 1260
857 / 1260
858 / 1260
859 / 1260
860 / 1260
861 / 1260
862 / 1260
863 / 1260
864 / 1260
865 / 1260
866 / 1260
867 / 1260
868 / 1260
869 / 1260
870 / 1260
871 / 1260
872 / 1260
873 / 1260
874 / 1260
875 / 1260
876 / 1260
877 / 1260
878 / 1260
879 / 1260
880 / 1260
881 / 1260
882 / 1260
883 / 1260
884 / 1260
885 / 1260
886 / 1260
887 / 1260
888 / 1260
889 / 1260
890 / 1260
891 / 1260
892 / 1260
893 / 1260
894 / 1260
895 / 1260
896 / 1260
897 / 1260
898 / 1260
899 / 1260
900 / 1260
901 / 1260
902 / 1260
903 / 1260
904 / 1260
905 / 1260
906 / 1260
907 / 1260
908 / 1260
909 / 1260
910 / 1260
911 / 1260
912 / 1260
913 / 1260
914 / 1260
915 / 1260
916 / 1260
917 / 1260
918 / 1260
919 / 1260
920 / 1260
921 / 1260
922 / 1260
923 / 1260
924 / 1260
925 / 1260
926 / 1260
927 / 1260
928 / 1260
929 / 1260
930 / 1260
931 / 1260
932 / 1260
933 / 1260
934 / 1260
935 / 1260
936 / 1260
937 / 1260
938 / 1260
939 / 1260
940 / 1260
941 / 1260
942 / 1260
943 / 1260
944 / 1260
945 / 1260
946 / 1260
947 / 1260
948 / 1260
949 / 1260
950 / 1260
951 / 1260
952 / 1260
953 / 1260
954 / 1260
955 / 1260
956 / 1260
957 / 1260
958 / 1260
959 / 1260
960 / 1260
961 / 1260
962 / 1260
963 / 1260
964 / 1260
965 / 1260
966 / 1260
967 / 1260
968 / 1260
969 / 1260
970 / 1260
971 / 1260
972 / 1260
973 / 1260
974 / 1260
975 / 1260
976 / 1260
977 / 1260
978 / 1260
979 / 1260
980 / 1260
981 / 1260
982 / 1260
983 / 1260
984 / 1260
985 / 1260
986 / 1260
987 / 1260
988 / 1260
989 / 1260
990 / 1260
991 / 1260
992 / 1260
993 / 1260
994 / 1260
995 / 1260
996 / 1260
997 / 1260
998 / 1260
999 / 1260
1000 / 1260
1001 / 1260
1002 / 1260
1003 / 1260
1004 / 1260
1005 / 1260
1006 / 1260
1007 / 1260
1008 / 1260
1009 / 1260
1010 / 1260
1011 / 1260
1012 / 1260
1013 / 1260
1014 / 1260
1015 / 1260
1016 / 1260
1017 / 1260
1018 / 1260
1019 / 1260
1020 / 1260
1021 / 1260
1022 / 1260
1023 / 1260
1024 / 1260
1025 / 1260
1026 / 1260
1027 / 1260
1028 / 1260
1029 / 1260
1030 / 1260
1031 / 1260
1032 / 1260
1033 / 1260
1034 / 1260
1035 / 1260
1036 / 1260
1037 / 1260
1038 / 1260
1039 / 1260
1040 / 1260
1041 / 1260
1042 / 1260
1043 / 1260
1044 / 1260
1045 / 1260
1046 / 1260
1047 / 1260
1048 / 1260
1049 / 1260
1050 / 1260
1051 / 1260
1052 / 1260
1053 / 1260
1054 / 1260
1055 / 1260
1056 / 1260
1057 / 1260
1058 / 1260
1059 / 1260
1060 / 1260
1061 / 1260
1062 / 1260
1063 / 1260
1064 / 1260
1065 / 1260
1066 / 1260
1067 / 1260
1068 / 1260
1069 / 1260
1070 / 1260
1071 / 1260
1072 / 1260
1073 / 1260
1074 / 1260
1075 / 1260
1076 / 1260
1077 / 1260
1078 / 1260
1079 / 1260
1080 / 1260
1081 / 1260
1082 / 1260
1083 / 1260
1084 / 1260
1085 / 1260
1086 / 1260
1087 / 1260
1088 / 1260
1089 / 1260
1090 / 1260
1091 / 1260
1092 / 1260
1093 / 1260
1094 / 1260
1095 / 1260
1096 / 1260
1097 / 1260
1098 / 1260
1099 / 1260
1100 / 1260
1101 / 1260
1102 / 1260
1103 / 1260
1104 / 1260
1105 / 1260
1106 / 1260
1107 / 1260
1108 / 1260
1109 / 1260
1110 / 1260
1111 / 1260
1112 / 1260
1113 / 1260
1114 / 1260
1115 / 1260
1116 / 1260
1117 / 1260
1118 / 1260
1119 / 1260
1120 / 1260
1121 / 1260
1122 / 1260
1123 / 1260
1124 / 1260
1125 / 1260
1126 / 1260
1127 / 1260
1128 / 1260
1129 / 1260
1130 / 1260
1131 / 1260
1132 / 1260
1133 / 1260
1134 / 1260
1135 / 1260
1136 / 1260
1137 / 1260
1138 / 1260
1139 / 1260
1140 / 1260
1141 / 1260
1142 / 1260
1143 / 1260
1144 / 1260
1145 / 1260
1146 / 1260
1147 / 1260
1148 / 1260
1149 / 1260
1150 / 1260
1151 / 1260
1152 / 1260
1153 / 1260
1154 / 1260
1155 / 1260
1156 / 1260
1157 / 1260
1158 / 1260
1159 / 1260
1160 / 1260
1161 / 1260
1162 / 1260
1163 / 1260
1164 / 1260
1165 / 1260
1166 / 1260
1167 / 1260
1168 / 1260
1169 / 1260
1170 / 1260
1171 / 1260
1172 / 1260
1173 / 1260
1174 / 1260
1175 / 1260
1176 / 1260
1177 / 1260
1178 / 1260
1179 / 1260
1180 / 1260
1181 / 1260
1182 / 1260
1183 / 1260
1184 / 1260
1185 / 1260
1186 / 1260
1187 / 1260
1188 / 1260
1189 / 1260
1190 / 1260
1191 / 1260
1192 / 1260
1193 / 1260
1194 / 1260
1195 / 1260
1196 / 1260
1197 / 1260
1198 / 1260
1199 / 1260
1200 / 1260
1201 / 1260
1202 / 1260
1203 / 1260
1204 / 1260
1205 / 1260
1206 / 1260
1207 / 1260
1208 / 1260
1209 / 1260
1210 / 1260
1211 / 1260
1212 / 1260
1213 / 1260
1214 / 1260
1215 / 1260
1216 / 1260
1217 / 1260
1218 / 1260
1219 / 1260
1220 / 1260
1221 / 1260
1222 / 1260
1223 / 1260
1224 / 1260
1225 / 1260
1226 / 1260
1227 / 1260
1228 / 1260
1229 / 1260
1230 / 1260
1231 / 1260
1232 / 1260
1233 / 1260
1234 / 1260
1235 / 1260
1236 / 1260
1237 / 1260
1238 / 1260
1239 / 1260
1240 / 1260
1241 / 1260
1242 / 1260
1243 / 1260
1244 / 1260
1245 / 1260
1246 / 1260
1247 / 1260
1248 / 1260
1249 / 1260
1250 / 1260
1251 / 1260
1252 / 1260
1253 / 1260
1254 / 1260
1255 / 1260
1256 / 1260
1257 / 1260

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{c+c1}{\PYZsh{}Unwarp the image}
        \PY{n}{unwarped} \PY{o}{=} \PY{n}{unwarp}\PY{p}{(}\PY{n}{window\PYZus{}img}\PY{p}{,}\PY{n}{src}\PY{p}{,}\PY{n}{dst}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{}Undistort image}
        \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{unwarped}\PY{p}{)}
        \PY{n}{frame2} \PY{o}{=} \PY{n}{frame}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
        \PY{n}{frame2}\PY{p}{[}\PY{n}{unwarped}\PY{o}{.}\PY{n}{nonzero}\PY{p}{(}\PY{p}{)}\PY{p}{]} \PY{o}{+}\PY{o}{=}\PY{l+m+mi}{100}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{frame}\PY{p}{[}\PY{n}{unwarped}\PY{o}{.}\PY{n}{nonzero}\PY{p}{(}\PY{p}{)}\PY{p}{]}\PY{o}{.}\PY{n}{shape}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
        \PY{c+c1}{\PYZsh{}cv2.putText(frame2,str(left\PYZus{}curverad),(int(frame\PYZus{}out.shape[1]*0.65),int(frame\PYZus{}out.shape[0]*0.1)), cv2.FONT\PYZus{}HERSHEY\PYZus{}DUPLEX,1000, (255, 0, 0))}
        
        
        \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{frame2}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}17}]:} \PY{n}{Numframe} \PY{o}{=} \PY{l+m+mi}{1026}
         \PY{n}{video}\PY{o}{.}\PY{n}{set}\PY{p}{(}\PY{n}{cv2}\PY{o}{.}\PY{n}{CAP\PYZus{}PROP\PYZus{}POS\PYZus{}FRAMES}\PY{p}{,}\PY{n}{Numframe}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}17}]:} False
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}30}]:} \PY{n}{l\PYZus{}thresh\PYZus{}min} \PY{o}{=} \PY{l+m+mi}{90}
         \PY{n}{l\PYZus{}thresh\PYZus{}max} \PY{o}{=} \PY{l+m+mi}{255}
         \PY{n}{thresh\PYZus{}min} \PY{o}{=} \PY{l+m+mi}{45}
         \PY{n}{thresh\PYZus{}max} \PY{o}{=} \PY{l+m+mi}{100}
         \PY{n}{s\PYZus{}thresh\PYZus{}min} \PY{o}{=} \PY{l+m+mi}{170}
         \PY{n}{s\PYZus{}thresh\PYZus{}max} \PY{o}{=} \PY{l+m+mi}{255}
         
         \PY{n}{img} \PY{o}{=} \PY{n}{frame}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{img}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Convert to HLS color space and separate the S channel}
         \PY{n}{hls} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{cvtColor}\PY{p}{(}\PY{n}{img}\PY{p}{,} \PY{n}{cv2}\PY{o}{.}\PY{n}{COLOR\PYZus{}RGB2HLS}\PY{p}{)}
         \PY{n}{h\PYZus{}channel} \PY{o}{=} \PY{n}{hls}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{]}
         \PY{n}{l\PYZus{}channel} \PY{o}{=} \PY{n}{hls}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{]}
         \PY{n}{s\PYZus{}channel} \PY{o}{=} \PY{n}{hls}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{]}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{h\PYZus{}channel}\PY{p}{)}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{l\PYZus{}channel}\PY{p}{)}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{s\PYZus{}channel}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{}===========================================================================================}
         \PY{c+c1}{\PYZsh{} Grayscale image}
         \PY{n}{gray} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{cvtColor}\PY{p}{(}\PY{n}{img}\PY{p}{,} \PY{n}{cv2}\PY{o}{.}\PY{n}{COLOR\PYZus{}RGB2GRAY}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Sobel x}
         \PY{n}{sobelx} \PY{o}{=} \PY{n}{cv2}\PY{o}{.}\PY{n}{Sobel}\PY{p}{(}\PY{n}{gray}\PY{p}{,} \PY{n}{cv2}\PY{o}{.}\PY{n}{CV\PYZus{}64F}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)} \PY{c+c1}{\PYZsh{} Take the derivative in x}
         \PY{n}{abs\PYZus{}sobelx} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{absolute}\PY{p}{(}\PY{n}{sobelx}\PY{p}{)} \PY{c+c1}{\PYZsh{} Absolute x derivative to accentuate lines away from horizontal}
         \PY{n}{scaled\PYZus{}sobel} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{uint8}\PY{p}{(}\PY{l+m+mi}{255}\PY{o}{*}\PY{n}{abs\PYZus{}sobelx}\PY{o}{/}\PY{n}{np}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{n}{abs\PYZus{}sobelx}\PY{p}{)}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Threshold x gradient}
         \PY{n}{sxbinary} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{scaled\PYZus{}sobel}\PY{p}{)}
         \PY{n}{sxbinary}\PY{p}{[}\PY{p}{(}\PY{n}{scaled\PYZus{}sobel} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{thresh\PYZus{}min}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{scaled\PYZus{}sobel} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{thresh\PYZus{}max}\PY{p}{)}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{sxbinary}\PY{p}{)}
         
         
         \PY{c+c1}{\PYZsh{} Threshold color channel s}
         \PY{n}{s\PYZus{}binary} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{s\PYZus{}channel}\PY{p}{)}
         \PY{n}{s\PYZus{}binary}\PY{p}{[}\PY{p}{(}\PY{n}{s\PYZus{}channel} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{s\PYZus{}thresh\PYZus{}min}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{s\PYZus{}channel} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{s\PYZus{}thresh\PYZus{}max}\PY{p}{)}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{s\PYZus{}binary}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Threshold color channel l}
         \PY{n}{l\PYZus{}binary} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{l\PYZus{}channel}\PY{p}{)}
         \PY{n}{l\PYZus{}binary}\PY{p}{[}\PY{p}{(}\PY{n}{l\PYZus{}channel} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{l\PYZus{}thresh\PYZus{}min}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{l\PYZus{}channel} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{l\PYZus{}thresh\PYZus{}max}\PY{p}{)}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{l\PYZus{}binary}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Stack each channel to view their individual contributions in green and blue respectively}
         \PY{c+c1}{\PYZsh{} This returns a stack of the two binary images, whose components you can see as different colors}
         \PY{n}{color\PYZus{}binary} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{dstack}\PY{p}{(}\PY{p}{(} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{sxbinary}\PY{p}{)}\PY{p}{,} \PY{n}{sxbinary}\PY{p}{,} \PY{n}{s\PYZus{}binary}\PY{p}{)}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{255}
         
         \PY{c+c1}{\PYZsh{} Combine the two binary thresholds}
         \PY{n}{combined\PYZus{}binary} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{sxbinary}\PY{p}{)}
         \PY{n}{combined\PYZus{}binary}\PY{p}{[}\PY{p}{(}\PY{p}{(}\PY{n}{s\PYZus{}binary} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{)}\PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{l\PYZus{}binary} \PY{o}{==}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)} \PY{o}{|} \PY{p}{(}\PY{n}{sxbinary} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
         
         
          \PY{c+c1}{\PYZsh{}Binary image}
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(} \PY{n}{combined\PYZus{}binary}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        NameError                                 Traceback (most recent call last)

        <ipython-input-30-8bc246b84b3a> in <module>()
    ----> 1 print(np.min(l\_channel))
          2 print(np.max(l\_channel))
          3 print(np.mean(l\_channel))
          4 
          5 l\_thresh\_min = 90
    

        NameError: name 'l\_channel' is not defined

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}57}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{frame}\PY{p}{)}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{warped}\PY{p}{)}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{warped}\PY{p}{[}\PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{p}{]}\PY{p}{)}
         
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{warped}\PY{p}{[}\PY{p}{:}\PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{,}\PY{p}{:}\PY{p}{]}\PY{p}{)}
         
         
         \PY{c+c1}{\PYZsh{} Take a histogram of the bottom half of the image}
         \PY{n}{histogram\PYZus{}down} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{warped}\PY{p}{[}\PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{histogram\PYZus{}down}\PY{p}{)}
         
         
         
         
         \PY{c+c1}{\PYZsh{} Find the peak of the left and right halves of the histogram}
         \PY{c+c1}{\PYZsh{} These will be the starting point for the left and right lines}
         \PY{n}{midpoint} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{int}\PY{p}{(}\PY{n}{histogram}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{)}
         \PY{n}{leftx\PYZus{}base} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{argmax}\PY{p}{(}\PY{n}{histogram\PYZus{}down}\PY{p}{[}\PY{p}{:}\PY{n}{midpoint}\PY{p}{]}\PY{p}{)}
         \PY{n}{rightx\PYZus{}base} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{argmax}\PY{p}{(}\PY{n}{histogram\PYZus{}down}\PY{p}{[}\PY{n}{midpoint}\PY{p}{:}\PY{p}{]}\PY{p}{)} \PY{o}{+} \PY{n}{midpoint}
         
         \PY{k}{if} \PY{p}{(}\PY{n}{rightx\PYZus{}base} \PY{o}{\PYZlt{}}\PY{l+m+mi}{850}\PY{p}{)}\PY{p}{:}
             \PY{c+c1}{\PYZsh{} Take a histogram of the up half of the image}
             \PY{n}{histogram} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{warped}\PY{p}{[}\PY{p}{:}\PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{,}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}    
             \PY{n}{rightx\PYZus{}base} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{argmax}\PY{p}{(}\PY{n}{histogram}\PY{p}{[}\PY{n}{midpoint}\PY{p}{:}\PY{p}{]}\PY{p}{)} \PY{o}{+} \PY{n}{midpoint}  
         
         \PY{k}{if} \PY{p}{(}\PY{n}{rightx\PYZus{}base} \PY{o}{\PYZgt{}}\PY{l+m+mi}{500}\PY{p}{)}\PY{p}{:}
             \PY{c+c1}{\PYZsh{} Take a histogram of the up half of the image}
             \PY{n}{histogram} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{warped}\PY{p}{[}\PY{p}{:}\PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{,}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
             \PY{n}{leftx\PYZus{}base} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{argmax}\PY{p}{(}\PY{n}{histogram}\PY{p}{[}\PY{p}{:}\PY{n}{midpoint}\PY{p}{]}\PY{p}{)} \PY{o}{+} \PY{n}{midpoint} 
             
         \PY{c+c1}{\PYZsh{} Create an output image to draw on and  visualize the result}
         \PY{n}{out\PYZus{}img} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{dstack}\PY{p}{(}\PY{p}{(}\PY{n}{warped}\PY{p}{,} \PY{n}{warped}\PY{p}{,} \PY{n}{warped}\PY{p}{)}\PY{p}{)}\PY{o}{*}\PY{l+m+mi}{255}
         
         
         
         
         
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{leftx\PYZus{}base\PYZus{}up}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{rightx\PYZus{}base\PYZus{}up}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{leftx\PYZus{}base\PYZus{}down}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{rightx\PYZus{}base\PYZus{}down}\PY{p}{)}
         \PY{n}{leftx\PYZus{}base} \PY{o}{=} \PY{n}{leftx\PYZus{}base\PYZus{}up}
         \PY{n}{rightx\PYZus{}base}\PY{o}{=} \PY{n}{rightx\PYZus{}base\PYZus{}up}
         
         
         \PY{c+c1}{\PYZsh{} Set height of windows}
         \PY{n}{window\PYZus{}height} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{int}\PY{p}{(}\PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{/}\PY{n}{nwindows}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} Identify the x and y positions of all nonzero pixels in the image}
         \PY{n}{nonzero} \PY{o}{=} \PY{n}{warped}\PY{o}{.}\PY{n}{nonzero}\PY{p}{(}\PY{p}{)}
         \PY{n}{nonzeroy} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{nonzero}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
         \PY{n}{nonzerox} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{nonzero}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
         
         
         \PY{c+c1}{\PYZsh{} Current positions to be updated for each window}
         \PY{n}{leftx\PYZus{}current} \PY{o}{=} \PY{n}{leftx\PYZus{}base}
         \PY{n}{rightx\PYZus{}current} \PY{o}{=} \PY{n}{rightx\PYZus{}base}
         
         \PY{c+c1}{\PYZsh{} Create empty lists to receive left and right lane pixel indices}
         \PY{n}{left\PYZus{}lane\PYZus{}inds} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         \PY{n}{right\PYZus{}lane\PYZus{}inds} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         
         
         \PY{c+c1}{\PYZsh{} Step through the windows one by one}
         \PY{k}{for} \PY{n}{window} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{nwindows}\PY{p}{)}\PY{p}{:}
             \PY{c+c1}{\PYZsh{} Identify window boundaries in x and y (and right and left)}
             \PY{n}{win\PYZus{}y\PYZus{}low} \PY{o}{=} \PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{p}{(}\PY{n}{window}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{*}\PY{n}{window\PYZus{}height}
             \PY{n}{win\PYZus{}y\PYZus{}high} \PY{o}{=} \PY{n}{warped}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{window}\PY{o}{*}\PY{n}{window\PYZus{}height}
             \PY{n}{win\PYZus{}xleft\PYZus{}low} \PY{o}{=} \PY{n}{leftx\PYZus{}current} \PY{o}{\PYZhy{}} \PY{n}{margin}
             \PY{n}{win\PYZus{}xleft\PYZus{}high} \PY{o}{=} \PY{n}{leftx\PYZus{}current} \PY{o}{+} \PY{n}{margin}
             \PY{n}{win\PYZus{}xright\PYZus{}low} \PY{o}{=} \PY{n}{rightx\PYZus{}current} \PY{o}{\PYZhy{}} \PY{n}{margin}
             \PY{n}{win\PYZus{}xright\PYZus{}high} \PY{o}{=} \PY{n}{rightx\PYZus{}current} \PY{o}{+} \PY{n}{margin}
             \PY{c+c1}{\PYZsh{} Draw the windows on the visualization image}
             \PY{n}{cv2}\PY{o}{.}\PY{n}{rectangle}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{,}\PY{p}{(}\PY{n}{win\PYZus{}xleft\PYZus{}low}\PY{p}{,}\PY{n}{win\PYZus{}y\PYZus{}low}\PY{p}{)}\PY{p}{,}\PY{p}{(}\PY{n}{win\PYZus{}xleft\PYZus{}high}\PY{p}{,}\PY{n}{win\PYZus{}y\PYZus{}high}\PY{p}{)}\PY{p}{,}
             \PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{255}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)} 
             
             \PY{n}{cv2}\PY{o}{.}\PY{n}{rectangle}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{,}\PY{p}{(}\PY{n}{win\PYZus{}xright\PYZus{}low}\PY{p}{,}\PY{n}{win\PYZus{}y\PYZus{}low}\PY{p}{)}\PY{p}{,}\PY{p}{(}\PY{n}{win\PYZus{}xright\PYZus{}high}\PY{p}{,}\PY{n}{win\PYZus{}y\PYZus{}high}\PY{p}{)}\PY{p}{,}
             \PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{255}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)} 
             
             \PY{c+c1}{\PYZsh{} Identify the nonzero pixels in x and y within the window}
             \PY{n}{good\PYZus{}left\PYZus{}inds} \PY{o}{=} \PY{p}{(}\PY{p}{(}\PY{n}{nonzeroy} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{win\PYZus{}y\PYZus{}low}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{nonzeroy} \PY{o}{\PYZlt{}} \PY{n}{win\PYZus{}y\PYZus{}high}\PY{p}{)} \PY{o}{\PYZam{}} 
             \PY{p}{(}\PY{n}{nonzerox} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{win\PYZus{}xleft\PYZus{}low}\PY{p}{)} \PY{o}{\PYZam{}}  \PY{p}{(}\PY{n}{nonzerox} \PY{o}{\PYZlt{}} \PY{n}{win\PYZus{}xleft\PYZus{}high}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{nonzero}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
             \PY{n}{good\PYZus{}right\PYZus{}inds} \PY{o}{=} \PY{p}{(}\PY{p}{(}\PY{n}{nonzeroy} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{win\PYZus{}y\PYZus{}low}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{nonzeroy} \PY{o}{\PYZlt{}} \PY{n}{win\PYZus{}y\PYZus{}high}\PY{p}{)} \PY{o}{\PYZam{}} 
             \PY{p}{(}\PY{n}{nonzerox} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{win\PYZus{}xright\PYZus{}low}\PY{p}{)} \PY{o}{\PYZam{}}  \PY{p}{(}\PY{n}{nonzerox} \PY{o}{\PYZlt{}} \PY{n}{win\PYZus{}xright\PYZus{}high}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{nonzero}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
             \PY{c+c1}{\PYZsh{} Append these indices to the lists}
             \PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{good\PYZus{}left\PYZus{}inds}\PY{p}{)}
             \PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{good\PYZus{}right\PYZus{}inds}\PY{p}{)}
             \PY{c+c1}{\PYZsh{} If you found \PYZgt{} minpix pixels, recenter next window on their mean position}
             \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{good\PYZus{}left\PYZus{}inds}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{minpix}\PY{p}{:}
                 \PY{n}{leftx\PYZus{}current} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{int}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{nonzerox}\PY{p}{[}\PY{n}{good\PYZus{}left\PYZus{}inds}\PY{p}{]}\PY{p}{)}\PY{p}{)}
             \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{good\PYZus{}right\PYZus{}inds}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{minpix}\PY{p}{:}        
                 \PY{n}{rightx\PYZus{}current} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{int}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{nonzerox}\PY{p}{[}\PY{n}{good\PYZus{}right\PYZus{}inds}\PY{p}{]}\PY{p}{)}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Concatenate the arrays of indices}
         \PY{n}{left\PYZus{}lane\PYZus{}inds} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{concatenate}\PY{p}{(}\PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{p}{)}
         \PY{n}{right\PYZus{}lane\PYZus{}inds} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{concatenate}\PY{p}{(}\PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Extract left and right line pixel positions}
         \PY{n}{leftx} \PY{o}{=} \PY{n}{nonzerox}\PY{p}{[}\PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{p}{]}
         \PY{n}{lefty} \PY{o}{=} \PY{n}{nonzeroy}\PY{p}{[}\PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{p}{]} 
         \PY{n}{rightx} \PY{o}{=} \PY{n}{nonzerox}\PY{p}{[}\PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{p}{]}
         \PY{n}{righty} \PY{o}{=} \PY{n}{nonzeroy}\PY{p}{[}\PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{p}{]} 
         
         \PY{c+c1}{\PYZsh{} Fit a second order polynomial to each}
         \PY{n}{left\PYZus{}fit} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{lefty}\PY{p}{,} \PY{n}{leftx}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
         \PY{n}{right\PYZus{}fit} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{righty}\PY{p}{,} \PY{n}{rightx}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
         
         \PY{n}{left\PYZus{}fit\PYZus{}m} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{lefty}\PY{p}{,} \PY{n}{leftx}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
         \PY{n}{right\PYZus{}fit\PYZus{}m} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{righty}\PY{p}{,} \PY{n}{rightx}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
         
         \PY{n}{out\PYZus{}img}\PY{p}{[}\PY{n}{nonzeroy}\PY{p}{[}\PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{p}{]}\PY{p}{,} \PY{n}{nonzerox}\PY{p}{[}\PY{n}{left\PYZus{}lane\PYZus{}inds}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{255}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}
         \PY{n}{out\PYZus{}img}\PY{p}{[}\PY{n}{nonzeroy}\PY{p}{[}\PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{p}{]}\PY{p}{,} \PY{n}{nonzerox}\PY{p}{[}\PY{n}{right\PYZus{}lane\PYZus{}inds}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{255}\PY{p}{]}
         
         
         
         \PY{c+c1}{\PYZsh{}TEST THE FUNCTION findLaneLines}
         
         \PY{c+c1}{\PYZsh{} Choose the number of sliding windows}
         \PY{n}{nwindows} \PY{o}{=} \PY{l+m+mi}{9}
         \PY{c+c1}{\PYZsh{} Set the width of the windows +/\PYZhy{} margin}
         \PY{n}{margin} \PY{o}{=} \PY{l+m+mi}{100}
         \PY{c+c1}{\PYZsh{} Set minimum number of pixels found to recenter window}
         \PY{n}{minpix} \PY{o}{=} \PY{l+m+mi}{50}
         \PY{c+c1}{\PYZsh{}left\PYZus{}fit, right\PYZus{}fit,out\PYZus{}img = findLaneLines (warped ,nwindows,margin,minpix, True)}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{imshow}\PY{p}{(}\PY{n}{out\PYZus{}img}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
230
1071
215
668

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}57}]:} <matplotlib.image.AxesImage at 0xdf833c8>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_26_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_26_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_26_4.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_26_5.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_26_6.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_26_7.png}
    \end{center}
    { \hspace*{\fill} \\}
    

    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
